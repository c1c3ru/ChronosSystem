(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{3042:function(e,t,s){Promise.resolve().then(s.bind(s,4779))},4779:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),r=s(605),n=s(9376),i=s(2265),l=s(7648),c=s(2660),d=s(3639),u=s(1723),o=s(1047),x=s(9397);let m=(0,s(9763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var h=s(8736),f=s(9178),p=s(4226),j=s(3214);function y(){let{data:e,status:t}=(0,r.useSession)();(0,n.useRouter)();let[s,y]=(0,i.useState)([]),[v,N]=(0,i.useState)([]),[b,g]=(0,i.useState)(!0),[w,k]=(0,i.useState)(!1),[E,Z]=(0,i.useState)(null),[R,C]=(0,i.useState)(""),[S,D]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"loading"===t||e||(0,r.signIn)()},[t]),(0,i.useEffect)(()=>{e&&(A(),P())},[e]);let A=async()=>{try{let e=await fetch("/api/employee/justifications");if(e.ok){let t=await e.json();t.success&&y(t.justifications)}}catch(e){}},P=async()=>{try{g(!0);let e=await fetch("/api/justifications/pending");if(e.ok){let t=await e.json();N(t)}}catch(e){}finally{g(!1)}},z=async()=>{if(E&&R.trim())try{D(!0);let e=await fetch("/api/employee/justifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:E.type,date:E.date,reason:R})}),t=await e.json();e.ok&&t.success?(k(!1),Z(null),C(""),A(),P(),alert(t.message)):alert(t.error||"Erro ao enviar justificativa")}catch(e){alert("Erro ao enviar justificativa")}finally{D(!1)}},J=e=>{switch(e){case"PENDING":return"text-warning bg-warning/20";case"APPROVED":return"text-success bg-success/20";case"REJECTED":return"text-error bg-error/20";default:return"text-neutral-400 bg-neutral-700"}},L=e=>{switch(e){case"PENDING":return"Pendente";case"APPROVED":return"Aprovada";case"REJECTED":return"Rejeitada";default:return e}},T=e=>{switch(e){case"LATE":return"Atraso";case"ABSENCE":return"Falta";default:return e}};return"loading"===t||b?(0,a.jsx)(j.gb,{}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,a.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(l.default,{href:"/employee",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao Portal"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Justificativas"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"Gerencie suas justificativas de atraso e falta"})]})]})})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[v.length>0&&(0,a.jsxs)(f.Zb,{className:"mb-6 border-warning/50",children:[(0,a.jsx)(f.Ol,{children:(0,a.jsxs)(f.ll,{className:"flex items-center space-x-2 text-warning",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Pend\xeancias que Requerem Justificativa"})]})}),(0,a.jsx)(f.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-warning/10 rounded-lg border border-warning/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat("LATE"===e.type?"bg-warning/20":"bg-error/20"),children:"LATE"===e.type?(0,a.jsx)(u.Z,{className:"h-4 w-4 text-warning"}):(0,a.jsx)(o.Z,{className:"h-4 w-4 text-error"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:T(e.type)}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:new Date(e.date).toLocaleDateString("pt-BR")})]})]}),e.canJustify&&(0,a.jsxs)(p.z,{size:"sm",onClick:()=>{Z(e),k(!0)},children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Justificar"]})]},e.id))})})]}),w&&E&&(0,a.jsxs)(f.Zb,{className:"mb-6",children:[(0,a.jsx)(f.Ol,{children:(0,a.jsxs)(f.ll,{children:["Nova Justificativa - ",T(E.type)]})}),(0,a.jsx)(f.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Data da Ocorr\xeancia"}),(0,a.jsx)("input",{type:"text",value:new Date(E.date).toLocaleDateString("pt-BR"),disabled:!0,className:"input bg-neutral-700"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Descri\xe7\xe3o"}),(0,a.jsx)("input",{type:"text",value:E.description,disabled:!0,className:"input bg-neutral-700"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Justificativa *"}),(0,a.jsx)("textarea",{className:"input min-h-[100px] resize-none",placeholder:"Descreva o motivo do atraso ou falta...",value:R,onChange:e=>C(e.target.value),maxLength:500}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:[R.length,"/500 caracteres"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(p.z,{onClick:z,disabled:!R.trim(),children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"Enviar Justificativa"]}),(0,a.jsx)(p.z,{variant:"ghost",onClick:()=>{k(!1),Z(null),C("")},children:"Cancelar"})]})]})})]}),(0,a.jsxs)(f.Zb,{children:[(0,a.jsx)(f.Ol,{children:(0,a.jsx)(f.ll,{children:"Hist\xf3rico de Justificativas"})}),(0,a.jsx)(f.aY,{children:s.length>0?(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neutral-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat("LATE"===e.type?"bg-warning/20":"bg-error/20"),children:"LATE"===e.type?(0,a.jsx)(u.Z,{className:"h-4 w-4 text-warning"}):(0,a.jsx)(o.Z,{className:"h-4 w-4 text-error"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:T(e.type)}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:new Date(e.date).toLocaleDateString("pt-BR")})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(J(e.status)),children:L(e.status)})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-300 mb-1",children:"Justificativa:"}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:e.reason})]}),e.adminResponse&&(0,a.jsxs)("div",{className:"border-t border-neutral-700 pt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-300 mb-1",children:"Resposta do Admin:"}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:e.adminResponse})]}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Enviado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-neutral-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhuma justificativa encontrada"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"Suas justificativas aparecer\xe3o aqui quando enviadas"})]})})]})]})]}):null}},4226:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var a=s(7437),r=s(2265),n=s(4508);let i=r.forwardRef((e,t)=>{let{className:s,variant:i="primary",size:l="md",loading:c=!1,asChild:d=!1,children:u,disabled:o,...x}=e,m=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[i],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[l],c&&"opacity-50 cursor-not-allowed",s);if(d){var h;return r.cloneElement(u,{className:(0,n.cn)(m,null===(h=u.props)||void 0===h?void 0:h.className),...x})}return(0,a.jsxs)("button",{className:m,ref:t,disabled:o||c,...x,children:[c&&(0,a.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),u]})});i.displayName="Button"},9178:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=s(7437),r=s(2265),n=s(4508);let i=r.forwardRef((e,t)=>{let{className:s,variant:r="default",children:i,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],s),...l,children:i})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3214:function(e,t,s){"use strict";s.d(t,{gb:function(){return n}});var a=s(7437);s(2265);var r=s(4508);function n(e){let{size:t="md",className:s,text:n}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",s),children:[(0,a.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[554,605,981,971,117,744],function(){return e(e.s=3042)}),_N_E=e.O()}]);