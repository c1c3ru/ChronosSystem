(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[487],{669:function(e,t,a){Promise.resolve().then(a.bind(a,6165))},6165:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var s=a(7437),r=a(2265),i=a(605),n=a(9376),l=a(7648),o=a(9637),c=a(2369),d=a(7692),m=a(5302),u=a(3774),x=a(9763);let h=(0,x.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var p=a(2489),g=a(3639);let f=(0,x.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),v=(0,x.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),b=(0,x.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),y=(0,x.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var N=a(1047),j=a(1723),w=a(9178),k=a(4226),E=a(3214),D=a(8906),R=a(8736);let T=(0,x.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var S=a(2252);function C(e){let{onScan:t,isActive:i,onActivate:n}=e,l=(0,r.useRef)(null),o=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)(null),[x,h]=(0,r.useState)(null),[f,v]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),[E,C]=(0,r.useState)(0),[Z,A]=(0,r.useState)(!1),[I,z]=(0,r.useState)("environment");(0,r.useEffect)(()=>{if(!i){U();return}let e=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(l.current&&o.current)try{if(!await P())return;await Q()}catch(e){h(e.message||"Erro ao iniciar c\xe2mera")}else t<a?setTimeout(()=>e(t+1,a),200*t):h("Erro ao inicializar scanner. Os elementos da interface n\xe3o est\xe3o prontos. Tente recarregar a p\xe1gina.")},t=setTimeout(()=>e(),100);return()=>{clearTimeout(t),u.current&&clearTimeout(u.current),i||U()}},[i]);let P=async()=>{try{if(navigator.permissions&&navigator.permissions.query){let e=await navigator.permissions.query({name:"camera"});if("denied"===e.state)return h("❌ Permiss\xe3o da c\xe2mera negada permanentemente. Redefina as permiss\xf5es nas configura\xe7\xf5es do navegador."),!1;return"granted"===e.state||"prompt"===e.state}return!0}catch(e){return!0}},V=async()=>{try{if(h(null),v(!0),C(e=>e+1),!await P()){v(!1);return}U(),await new Promise(e=>setTimeout(e,500)),await Q()}catch(e){h(e.message||"Erro ao tentar novamente"),v(!1),E<3&&q(e)&&M()}},q=e=>["NotReadableError","TrackStartError","AbortError","Elemento de v\xeddeo n\xe3o est\xe1 dispon\xedvel"].some(t=>{var a;return e.name===t||(null===(a=e.message)||void 0===a?void 0:a.includes(t))}),M=()=>{u.current&&clearTimeout(u.current),A(!0),u.current=setTimeout(()=>{A(!1),V()},Math.min(1e3*Math.pow(2,E),1e4))},H=async()=>{try{v(!0),U(),z("environment"===I?"user":"environment"),await new Promise(e=>setTimeout(e,500)),await Q()}catch(e){h("Erro ao alternar c\xe2mera. Tente novamente."),v(!1)}},O=e=>{w(function(e){if(!e||"string"!=typeof e)return{isValid:!1,type:"INVALID",error:"QR code vazio ou inv\xe1lido",confidence:"high"};let t=e.trim();if(0===t.length)return{isValid:!1,type:"INVALID",error:"QR code vazio",confidence:"high"};if(t.includes(".")){let e=t.split(".");if(2===e.length)try{let t=JSON.parse(atob(e[0]));if(t.machineId&&t.nonce&&t.timestamp){let e=[],a=!1;if(t.expiresIn){let s=t.timestamp+1e3*t.expiresIn;(a=Date.now()>s)&&e.push("QR code pode estar expirado")}return{isValid:!0,type:"SECURE",machineId:t.machineId,confidence:"high",warnings:e.length>0?e:void 0,details:{hasNonce:!0,hasExpiration:!!t.expiresIn,isExpired:a,format:"HMAC-SHA256"}}}}catch(e){return{isValid:!1,type:"INVALID",error:"QR seguro com payload inv\xe1lido",confidence:"high"}}return{isValid:!1,type:"INVALID",error:"Formato de QR seguro inv\xe1lido (deve ter payload.signature)",confidence:"high"}}if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t),a=e.machineId||e.id;if(!a)return{isValid:!1,type:"INVALID",error:"QR JSON sem machineId ou id",confidence:"high"};let s=[],r=!1;e.expires&&(r=Date.now()>e.expires)&&s.push("QR code expirado");let i=!!e.nonce;return{isValid:!r,type:"JSON",machineId:a,confidence:i?"medium":"low",warnings:s.length>0?s:void 0,error:r?"QR code expirado":void 0,details:{hasNonce:i,hasExpiration:!!e.expires,isExpired:r,format:"JSON"}}}catch(e){return{isValid:!1,type:"INVALID",error:"QR JSON malformado",confidence:"high"}}return/^[a-zA-Z0-9_-]+$/.test(t)?t.length<3?{isValid:!1,type:"INVALID",error:"ID da m\xe1quina muito curto (m\xednimo 3 caracteres)",confidence:"high"}:t.length>50?{isValid:!1,type:"INVALID",error:"ID da m\xe1quina muito longo (m\xe1ximo 50 caracteres)",confidence:"medium"}:{isValid:!0,type:"TEXT",machineId:t,confidence:"low",warnings:["QR code simples sem valida\xe7\xe3o de seguran\xe7a"],details:{hasNonce:!1,hasExpiration:!1,isExpired:!1,format:"TEXT"}}:{isValid:!1,type:"INVALID",error:"Formato de QR code n\xe3o reconhecido",confidence:"high",details:{format:"UNKNOWN"}}}(e));let a=function(e){let t=[],a=[];for(let s of(e.length>2e3&&(t.push("QR code muito longo (poss\xedvel ataque)"),a.push("Use QR codes menores para melhor seguran\xe7a")),[/javascript:/i,/data:/i,/vbscript:/i,/<script/i,/eval\(/i,/document\./i,/window\./i]))if(s.test(e)){t.push("QR code cont\xe9m c\xf3digo potencialmente malicioso"),a.push("N\xe3o use QR codes de fontes n\xe3o confi\xe1veis");break}return e.startsWith("http://")&&!e.startsWith("http://localhost")&&(t.push("QR code cont\xe9m URL n\xe3o segura (HTTP)"),a.push("Prefira URLs HTTPS para maior seguran\xe7a")),{isSafe:0===t.length,risks:t,recommendations:a}}(e);if(!a.isSafe&&a.risks.some(e=>e.includes("malicioso"))){h("QR code rejeitado por motivos de seguran\xe7a"),setTimeout(()=>{h(null),w(null)},3e3);return}t(e),U()},Q=async()=>{try{if(v(!0),h(null),!l.current)throw Error("Elemento de v\xeddeo n\xe3o est\xe1 dispon\xedvel");if(!o.current)throw Error("Elemento canvas n\xe3o est\xe1 dispon\xedvel");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("getUserMedia n\xe3o \xe9 suportado neste navegador. Use HTTPS ou um navegador moderno.");if("https:"!==location.protocol&&!location.hostname.includes("localhost")&&"127.0.0.1"!==location.hostname)throw Error("Acesso \xe0 c\xe2mera requer HTTPS. Por favor, acesse o site via HTTPS.");c.current&&(c.current.getTracks().forEach(e=>e.stop()),c.current=null);let e=null,t=[{video:{facingMode:{exact:I},width:{ideal:1280,min:640},height:{ideal:720,min:480}}},{video:{facingMode:{ideal:I},width:{ideal:1280,min:640},height:{ideal:720,min:480}}},{video:{width:{ideal:1280,min:640},height:{ideal:720,min:480}}},{video:!0}],a=null;for(let s=0;s<t.length;s++)try{e=await navigator.mediaDevices.getUserMedia(t[s]);break}catch(e){a=e;continue}if(!e)try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),a=t.find(e=>{let a=e.label.toLowerCase();return a.includes("back")||a.includes("rear")||a.includes("environment")||a.includes("traseira")||a.includes("posterior")||a.includes("camera 1")||a.includes("0, facing back")||t.length>1&&1===t.indexOf(e)});a&&(e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:a.deviceId},width:{ideal:1280,min:640},height:{ideal:720,min:480}}}))}catch(e){}if(!e)throw a||Error("N\xe3o foi poss\xedvel acessar a c\xe2mera");c.current=e;let s=e.getVideoTracks()[0];if(s&&s.getSettings(),!l.current)throw Error("Elemento de v\xeddeo n\xe3o est\xe1 dispon\xedvel");let r=l.current;r.srcObject=e,r.playsInline=!0,r.muted=!0,r.autoplay=!0;let i=new Promise((e,t)=>{let a=setTimeout(()=>{t(Error("Timeout aguardando v\xeddeo estar pronto"))},1e4),s=()=>{r.readyState>=r.HAVE_ENOUGH_DATA?(clearTimeout(a),e()):setTimeout(s,100)};s(),r.addEventListener("loadeddata",()=>{clearTimeout(a),e()},{once:!0}),r.addEventListener("canplay",()=>{clearTimeout(a),e()},{once:!0})});try{await r.play()}catch(e){}try{await i}catch(e){}N(!0),v(!1),setTimeout(()=>{l.current&&l.current.srcObject?L():h("Erro ao inicializar scanner. Tente novamente.")},1e3)}catch(s){var e,t,a;v(!1),"NotAllowedError"===s.name||"PermissionDeniedError"===s.name?h("❌ Permiss\xe3o da c\xe2mera negada. Clique no \xedcone da c\xe2mera na barra de endere\xe7os e permita o acesso."):"NotFoundError"===s.name||"DevicesNotFoundError"===s.name?h("❌ Nenhuma c\xe2mera encontrada. Verifique se h\xe1 uma c\xe2mera conectada ao dispositivo."):"NotReadableError"===s.name||"TrackStartError"===s.name?h("❌ C\xe2mera em uso por outro app. Feche outros aplicativos que usam a c\xe2mera e tente novamente."):"OverconstrainedError"===s.name||"ConstraintNotSatisfiedError"===s.name?h("❌ Configura\xe7\xe3o da c\xe2mera n\xe3o suportada. Tente usar um dispositivo diferente."):(null===(e=s.message)||void 0===e?void 0:e.includes("HTTPS"))?h("\uD83D\uDD12 Acesso \xe0 c\xe2mera requer HTTPS. Acesse o site via https:// ou use localhost."):(null===(t=s.message)||void 0===t?void 0:t.includes("getUserMedia"))?h("❌ Navegador n\xe3o suporta c\xe2mera. Use Chrome, Firefox ou Safari atualizado."):(null===(a=s.message)||void 0===a?void 0:a.includes("Timeout"))?h("⏱️ Timeout ao inicializar c\xe2mera. Verifique a conex\xe3o e tente novamente."):h("❌ Erro: ".concat(s.message||"Falha ao acessar c\xe2mera. Verifique permiss\xf5es e tente novamente."))}},U=()=>{try{if(d.current&&(clearInterval(d.current),d.current=null),c.current&&(c.current.getTracks().forEach(e=>{try{e.stop()}catch(e){}}),c.current=null),l.current)try{l.current.srcObject=null,l.current.pause()}catch(e){}N(!1),v(!1),h(null)}catch(e){}},L=async()=>{if(!l.current||!o.current)return;let e=o.current,t=e.getContext("2d",{willReadFrequently:!0}),s=l.current;if(!t){h("N\xe3o foi poss\xedvel inicializar o contexto de v\xeddeo");return}if(!s.srcObject){h("C\xe2mera n\xe3o est\xe1 ativa. Tente novamente.");return}if(!(s.videoWidth>0&&s.videoHeight>0?(e.width=s.videoWidth,e.height=s.videoHeight,!0):(e.width=640,e.height=480,!1))){let t=setInterval(()=>{s.videoWidth>0&&s.videoHeight>0&&(e.width=s.videoWidth,e.height=s.videoHeight,clearInterval(t))},200);setTimeout(()=>{clearInterval(t)},5e3)}if(window.BarcodeDetector){let e=new window.BarcodeDetector({formats:["qr_code"]});d.current=setInterval(async()=>{if(i&&!(s.readyState<s.HAVE_CURRENT_DATA))try{let t=await e.detect(s);if(t.length>0){let e=t[0].rawValue;O(e)}}catch(e){e.message&&e.message.includes("detect")}},500)}else try{let r=(await a.e(664).then(a.t.bind(a,9801,23))).default;d.current=setInterval(()=>{if(i&&!(s.readyState<s.HAVE_CURRENT_DATA))try{if(0===s.videoWidth||0===s.videoHeight)return;(e.width!==s.videoWidth||e.height!==s.videoHeight)&&(e.width=s.videoWidth,e.height=s.videoHeight),t.drawImage(s,0,0,e.width,e.height);let a=t.getImageData(0,0,e.width,e.height),i=r(a.data,a.width,a.height,{inversionAttempts:"dontInvert"});i&&O(i.data)}catch(e){e.message&&e.message.includes("drawImage")}},300)}catch(e){h("Biblioteca de QR code n\xe3o dispon\xedvel.")}};return i?(0,s.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden w-full",style:{minHeight:"400px"},children:[f&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-center p-8 z-10",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white text-base font-medium",children:"Iniciando c\xe2mera..."}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Aguarde um momento"})]})}),x&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-center p-8 z-10 bg-black/95",children:(0,s.jsxs)("div",{className:"max-w-md",children:[(0,s.jsx)(g.Z,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-red-400 text-base font-medium mb-2",children:"Erro ao acessar c\xe2mera"}),(0,s.jsx)("p",{className:"text-red-300 text-sm mb-6 px-4 leading-relaxed",children:x}),x.includes("Permiss\xe3o")&&(0,s.jsxs)("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-3 mb-4 text-xs text-blue-300",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"\uD83D\uDCA1 Como permitir acesso:"}),(0,s.jsx)("p",{children:"1. Clique no \xedcone \uD83D\uDD12 ou \uD83D\uDCF9 na barra de endere\xe7os"}),(0,s.jsx)("p",{children:'2. Selecione "Permitir" para c\xe2mera'}),(0,s.jsx)("p",{children:"3. Recarregue a p\xe1gina se necess\xe1rio"})]}),x.includes("HTTPS")&&(0,s.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/30 rounded-lg p-3 mb-4 text-xs text-yellow-300",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"\uD83D\uDD12 Contexto seguro necess\xe1rio:"}),(0,s.jsx)("p",{children:"Acesse via https:// ou use localhost para desenvolvimento"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,s.jsxs)(k.z,{onClick:V,size:"sm",className:"bg-green-500 hover:bg-green-600",children:[(0,s.jsx)(b,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),(0,s.jsxs)(k.z,{onClick:U,variant:"secondary",size:"sm",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})}),(0,s.jsxs)("div",{className:"relative w-full h-full ".concat(!y||x||f?"hidden":""),children:[(0,s.jsx)("video",{ref:l,className:"w-full h-full bg-gray-900",playsInline:!0,muted:!0,autoPlay:!0,style:{width:"100%",height:"100%",objectFit:"cover",minHeight:"400px",display:"block"},onLoadedMetadata:()=>{},onLoadedData:()=>{},onCanPlay:()=>{},onPlaying:()=>{},onError:e=>{h("Erro ao carregar v\xeddeo da c\xe2mera")}}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsxs)("div",{className:"border-2 border-green-500 rounded-lg w-64 h-64 sm:w-72 sm:h-72 relative shadow-lg",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-500 rounded-tl-lg"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-500 rounded-tr-lg"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-500 rounded-bl-lg"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-500 rounded-br-lg"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-green-500 opacity-50",children:(0,s.jsx)("div",{className:"absolute -top-1 left-1/2 w-6 h-3 bg-green-500 rounded-full transform -translate-x-1/2 animate-pulse"})})]})}),j&&(0,s.jsx)("div",{className:"absolute top-4 left-4 right-4 z-20",children:(0,s.jsx)("div",{className:"\n              bg-black/80 backdrop-blur-sm rounded-lg p-3 border-l-4\n              ".concat(j.isValid?"SECURE"===j.type?"border-green-500 text-green-400":"JSON"===j.type?"border-yellow-500 text-yellow-400":"border-orange-500 text-orange-400":"border-red-500 text-red-400","\n            "),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["SECURE"===j.type&&(0,s.jsx)(D.Z,{className:"h-4 w-4"}),"JSON"===j.type&&(0,s.jsx)(R.Z,{className:"h-4 w-4"}),"TEXT"===j.type&&(0,s.jsx)(T,{className:"h-4 w-4"}),!j.isValid&&(0,s.jsx)(S.Z,{className:"h-4 w-4"}),j.isValid&&(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:[j.isValid?"QR V\xe1lido":"QR Inv\xe1lido",j.machineId&&" - ".concat(j.machineId)]}),j.error&&(0,s.jsx)("div",{className:"text-xs opacity-80 mt-1",children:j.error}),j.warnings&&j.warnings.length>0&&(0,s.jsxs)("div",{className:"text-xs opacity-70 mt-1",children:["⚠️ ",j.warnings[0]]})]}),(0,s.jsx)("div",{className:"text-xs opacity-60",children:"high"===j.confidence?"\uD83D\uDD12":"medium"===j.confidence?"\uD83D\uDD13":"⚠️"})]})})}),(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"polygon(0% 0%, 0% 100%, calc(50% - 128px) 100%, calc(50% - 128px) calc(50% - 128px), calc(50% + 128px) calc(50% - 128px), calc(50% + 128px) calc(50% + 128px), calc(50% - 128px) calc(50% + 128px), calc(50% - 128px) 100%, 100% 100%, 100% 0%)"}})}),(0,s.jsxs)("div",{className:"absolute top-4 right-4 z-20 flex gap-2",children:[(0,s.jsx)(k.z,{onClick:H,variant:"ghost",size:"sm",className:"bg-black/70 border border-white/30 text-white hover:bg-black/90 backdrop-blur-sm",title:"Alternar para c\xe2mera ".concat("environment"===I?"frontal":"traseira"),children:(0,s.jsx)(b,{className:"h-5 w-5"})}),(0,s.jsx)(k.z,{onClick:U,variant:"ghost",size:"sm",className:"bg-black/70 border border-white/30 text-white hover:bg-black/90 backdrop-blur-sm",children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("canvas",{ref:o,className:"hidden"}),y&&!x&&!f&&(0,s.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,s.jsxs)("div",{className:"bg-black/80 backdrop-blur-sm text-white px-4 py-2 rounded-lg text-sm border border-green-500/30 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"✅ Scanner ativo - Aponte para o QR code"}),(0,s.jsxs)("span",{className:"text-xs opacity-70",children:["\uD83D\uDCF9 ","environment"===I?"Traseira":"Frontal"]})]})})]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,s.jsx)(b,{className:"h-10 w-10 text-white"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Scanner QR Code"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Clique no bot\xe3o abaixo para ativar a c\xe2mera"}),(0,s.jsxs)(k.z,{onClick:n,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-8 py-3 text-lg font-semibold shadow-lg",children:[(0,s.jsx)(b,{className:"h-5 w-5 mr-2"}),"Ativar Scanner"]})]})}function Z(){let{data:e,status:t}=(0,i.useSession)();(0,n.useRouter)();let[a,x]=(0,r.useState)(null),[D,R]=(0,r.useState)([]),[T,S]=(0,r.useState)(!0),[Z,A]=(0,r.useState)(!1),[I,z]=(0,r.useState)(null),[P,V]=(0,r.useState)(!1),[q,M]=(0,r.useState)(null),[H,O]=(0,r.useState)(null),[Q,U]=(0,r.useState)(!1),[L,F]=(0,r.useState)("prompt"),[_,W]=(0,r.useState)(!1);(0,r.useRef)(null),(0,r.useEffect)(()=>{J()},[]);let J=async()=>{try{if(U(!0),O(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){F("denied"),O("C\xe2mera n\xe3o suportada neste dispositivo");return}if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname){F("denied"),O("HTTPS \xe9 necess\xe1rio para acessar a c\xe2mera. Acesse via https://");return}if("undefined"!=typeof document)try{let e=document,t=e.featurePolicy||e.permissionsPolicy;if(t&&"function"==typeof t.allowsFeature&&!t.allowsFeature("camera")){F("denied"),O("Pol\xedtica de permiss\xf5es bloqueia o acesso \xe0 c\xe2mera");return}}catch(e){}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}})).getTracks().forEach(e=>{e.stop()}),F("granted");return}catch(e){if("NotAllowedError"===e.name){F("denied"),O("Permiss\xe3o da c\xe2mera negada. Clique no \xedcone da c\xe2mera na barra de endere\xe7os e permita o acesso.");return}if("NotFoundError"===e.name){F("denied"),O("Nenhuma c\xe2mera encontrada neste dispositivo.");return}if("NotReadableError"===e.name){F("denied"),O("C\xe2mera est\xe1 sendo usada por outro aplicativo.");return}}if("permissions"in navigator)try{let e=await navigator.permissions.query({name:"camera"}),t=e.state;F(t),e.onchange=()=>{let t=e.state;F(t),"granted"===t&&(O(null),setTimeout(()=>J(),500))}}catch(e){F("prompt")}else F("prompt")}catch(e){F("prompt")}finally{U(!1)}};(0,r.useEffect)(()=>{"loading"===t||e||(0,i.signIn)()},[t]),(0,r.useEffect)(()=>{e&&Y()},[e]);let Y=async()=>{try{S(!0);let e=await fetch("/api/employee/dashboard-enhanced");if(e.ok){let t=await e.json();if(t.success){x(t.workStatus);let e=t.analyzedDays.map(e=>({id:"day-".concat(e.date),date:e.date,entry:e.entry,exit:e.exit,hours:e.totalHours,status:"completed"===e.status?"Completo":"incomplete"===e.status?"Incompleto":"absent"===e.status?"Ausente":"Em andamento",location:e.location,alerts:e.alerts,hasJustification:e.hasJustification}));R(e)}else throw Error(t.error||"Erro ao carregar dados")}else throw Error("Erro na requisi\xe7\xe3o")}catch(e){R([]),x({isWorking:!1,lastRecord:null,todayHours:"0h 00min"})}finally{S(!1)}},B=()=>{A(!0),W(!0)},X=async e=>{try{V(!0),O(""),z("");let s=await fetch("/api/attendance/qr-unified",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrData:e})}),r=await s.json();if(s.ok&&r.success){var t,a;let e="ENTRY"===r.record.type?"Entrada":"Sa\xedda",s=r.record.time||new Date(r.record.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),i="SECURE"===r.qrType?"\uD83D\uDD12":"SIMPLE"===r.qrType?"\uD83D\uDCDD":"\uD83D\uDCC4",n=(null===(t=r.analysis)||void 0===t?void 0:t.confidence)==="high"?"Alta confian\xe7a":(null===(a=r.analysis)||void 0===a?void 0:a.confidence)==="medium"?"M\xe9dia confian\xe7a":"Baixa confian\xe7a",l=r.analysis?"".concat(i," ").concat(r.smartMessage," (").concat(n,")"):"".concat(e," registrada \xe0s ").concat(s);z("✅ ".concat(l)),M(l),r.analysis&&r.analysis.warnings.length,setTimeout(async()=>{await G(),setTimeout(async()=>{await Y(),setTimeout(()=>{M(null)},5e3)},500)},3e3)}else{let e=r.error||"Erro ao registrar ponto";"MACHINE_NOT_FOUND"===r.code?e="M\xe1quina n\xe3o encontrada. Verifique se o QR code est\xe1 correto.":"QR_NOT_FOUND"===r.code?e="QR code inv\xe1lido ou expirado. Gere um novo QR code.":"QR_ALREADY_USED"===r.code?e="QR code j\xe1 foi utilizado. Gere um novo QR code.":"DUPLICATE_RECORD"===r.code?e="Registro j\xe1 feito recentemente. Aguarde 1 minuto.":"VALIDATION_FAILED"===r.code?e="Registro n\xe3o permitido no momento. Verifique o hor\xe1rio.":"UNAUTHORIZED"===r.code?e="Sess\xe3o expirada. Fa\xe7a login novamente.":"RATE_LIMIT_EXCEEDED"===r.code&&(e="Muitas tentativas. Aguarde alguns segundos."),O(e),z("")}}catch(e){O("Erro ao registrar ponto: ".concat(e.message)),z("")}finally{V(!1)}},G=()=>{A(!1),W(!1),V(!1),O(null),z(null)};return"loading"===t?(0,s.jsx)(E.gb,{size:"lg",text:"Carregando..."}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,s.jsx)("div",{className:"glass border-b border-neutral-700/50",children:(0,s.jsx)("div",{className:"container mx-auto px-3 sm:px-4 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,s.jsx)(l.default,{href:"/",className:"flex items-center hover:opacity-80 transition-opacity",children:(0,s.jsx)(o.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),(0,s.jsx)("div",{className:"h-5 w-px bg-neutral-600 hidden sm:block"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,s.jsx)("div",{className:"bg-primary/20 rounded-lg sm:rounded-xl p-1.5 sm:p-2",children:(0,s.jsx)(c.Z,{className:"h-4 w-4 sm:h-6 sm:w-6 text-primary"})}),(0,s.jsxs)("div",{className:"hidden sm:block",children:[(0,s.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-white",children:"Portal do Estagi\xe1rio"}),(0,s.jsx)("p",{className:"text-neutral-400 text-xs sm:text-sm",children:"Sistema Chronos - Registro de Ponto"})]}),(0,s.jsx)("div",{className:"block sm:hidden",children:(0,s.jsx)("h1",{className:"text-base font-bold text-white",children:"Portal"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,s.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,s.jsx)("p",{className:"text-white font-medium text-sm",children:e.user.name}),(0,s.jsx)("p",{className:"text-neutral-400 text-xs",children:e.user.email})]}),(0,s.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"sm",onClick:()=>(0,i.signOut)({callbackUrl:"/"}),className:"p-2",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8",children:(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8",children:[q&&(0,s.jsx)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 animate-in slide-in-from-top-2 duration-300",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-green-400 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-400 font-medium",children:"Ponto Registrado!"}),(0,s.jsx)("p",{className:"text-green-300 text-sm",children:q})]})]})}),(0,s.jsx)(w.Zb,{variant:"glass",className:"overflow-hidden",children:(0,s.jsx)(w.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full ".concat((null==a?void 0:a.isWorking)?"bg-primary animate-pulse":"bg-neutral-500")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:(null==a?void 0:a.isWorking)?"Trabalhando":"Fora do expediente"}),(null==a?void 0:a.lastRecord)&&(0,s.jsxs)("p",{className:"text-neutral-400 flex items-center mt-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"\xdaltimo registro: ","ENTRY"===a.lastRecord.type?"Entrada":"Sa\xedda"," \xe0s ",a.lastRecord.time," - ",a.lastRecord.location]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center text-primary mb-2",children:[(0,s.jsx)(h,{className:"h-5 w-5 mr-2"}),(0,s.jsx)("span",{className:"text-2xl font-bold",children:null==a?void 0:a.todayHours})]}),(0,s.jsx)("p",{className:"text-neutral-400 text-sm",children:"Horas hoje"})]})]})})}),_&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm z-modal flex items-start sm:items-center justify-center overflow-y-auto",children:(0,s.jsx)("div",{className:"w-full min-h-screen sm:min-h-0 sm:max-w-md lg:max-w-lg mx-auto flex items-start sm:items-center justify-center p-4 sm:p-6",children:(0,s.jsxs)(w.Zb,{variant:"glass",className:"w-full max-w-none sm:max-w-md lg:max-w-lg",children:[(0,s.jsxs)(w.Ol,{className:"flex flex-row items-center justify-between p-4 sm:p-6 border-b border-white/10",children:[(0,s.jsx)(w.ll,{className:"text-white text-lg sm:text-xl",children:"Registrar Ponto"}),(0,s.jsx)(k.z,{onClick:G,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10 p-2 rounded-full",children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)(w.aY,{className:"space-y-4 p-4 sm:p-6",children:[(0,s.jsx)("div",{className:"relative bg-black rounded-lg overflow-hidden border border-primary/30",children:(0,s.jsx)(C,{isActive:_,onScan:X,onActivate:()=>W(!0)})}),P&&(0,s.jsx)("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"}),(0,s.jsx)("p",{className:"text-blue-400 text-base font-medium",children:"Registrando ponto..."})]})}),I&&(0,s.jsx)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-green-400 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-green-400 text-base break-words",children:I})]})}),H&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-red-400 text-base break-words",children:H})]})}),!H&&!I&&!P&&(0,s.jsxs)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-green-400 text-center text-sm font-medium mb-2",children:"\uD83D\uDCF1 Aponte a c\xe2mera para o c\xf3digo QR da m\xe1quina"}),(0,s.jsxs)("p",{className:"text-green-300 text-center text-xs",children:["• Mantenha o QR dentro do quadrado verde",(0,s.jsx)("br",{}),"• Certifique-se de que h\xe1 boa ilumina\xe7\xe3o",(0,s.jsx)("br",{}),"• Mantenha a c\xe2mera est\xe1vel"]})]}),(0,s.jsx)("div",{className:"text-center space-y-4 pt-2",children:(0,s.jsx)(k.z,{onClick:G,variant:"secondary",className:"w-full py-3 text-base font-medium",disabled:P,children:P?"Processando...":"Cancelar"})})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,s.jsx)(w.Zb,{variant:"glass",className:"group hover:scale-105 transition-all duration-200 h-full",children:(0,s.jsxs)(w.aY,{className:"p-4 sm:p-6 lg:p-8 text-center flex flex-col h-full",children:[(0,s.jsx)("div",{className:"bg-primary/20 rounded-2xl w-16 h-16 sm:w-20 sm:h-20 flex items-center justify-center mx-auto mb-4 sm:mb-6 group-hover:bg-primary/30 transition-colors",children:(null==a?void 0:a.isWorking)?(0,s.jsx)(f,{className:"h-10 w-10 text-primary"}):(0,s.jsx)(v,{className:"h-10 w-10 text-primary"})}),(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-2 sm:mb-3",children:(null==a?void 0:a.isWorking)?"Registrar Sa\xedda":"Registrar Entrada"}),(0,s.jsx)("p",{className:"text-neutral-400 text-xs sm:text-sm mb-4 sm:mb-6",children:"Use a c\xe2mera para registrar seu ponto na m\xe1quina"}),(0,s.jsxs)("div",{className:"flex-1 mb-6",children:[Q&&(0,s.jsx)("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 mb-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-blue-400 text-sm",children:"Preparando c\xe2mera..."})]})}),!Q&&"denied"===L&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(g.Z,{className:"h-6 w-6 text-red-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-red-400 text-sm font-medium mb-2",children:"C\xe2mera Bloqueada"}),(0,s.jsx)("p",{className:"text-red-400 text-xs mb-3",children:"Para registrar seu ponto, permita o acesso \xe0 c\xe2mera quando solicitado"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(k.z,{onClick:async()=>{F("checking"),O(null),U(!0);try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:640},height:{ideal:480}}})).getTracks().forEach(e=>e.stop()),F("granted"),O(null)}catch(e){F("denied"),O("Permiss\xe3o da c\xe2mera \xe9 necess\xe1ria para escanear QR codes")}U(!1)},size:"sm",variant:"ghost",className:"text-red-400 border-red-400/50 hover:bg-red-500/10",children:"Permitir C\xe2mera"})})]})}),H&&"denied"!==L&&(0,s.jsxs)("div",{className:"bg-orange-500/20 border border-orange-500/30 rounded-lg p-3 mb-4",children:[(0,s.jsx)("p",{className:"text-orange-400 text-xs",children:H}),(0,s.jsx)(k.z,{onClick:()=>{O(null),J()},size:"sm",variant:"ghost",className:"text-orange-400 border-orange-400/50 hover:bg-orange-500/10 mt-2",children:"Tentar Novamente"})]})]}),(0,s.jsxs)(k.z,{onClick:()=>{B()},className:"w-full mt-auto",disabled:_||Q,children:[(0,s.jsx)(b,{className:"h-5 w-5 mr-2"}),_?"Abrindo Scanner...":Q?"Verificando...":"Abrir Scanner QR"]})]})}),(0,s.jsx)(w.Zb,{variant:"glass",className:"group hover:scale-105 transition-all duration-200 h-full",children:(0,s.jsxs)(w.aY,{className:"p-4 sm:p-6 lg:p-8 text-center flex flex-col h-full",children:[(0,s.jsx)("div",{className:"bg-secondary-500/20 rounded-2xl w-16 h-16 sm:w-20 sm:h-20 flex items-center justify-center mx-auto mb-4 sm:mb-6 group-hover:bg-secondary-500/30 transition-colors",children:(0,s.jsx)(y,{className:"h-10 w-10 text-secondary-500"})}),(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-2 sm:mb-3",children:"Hist\xf3rico Completo"}),(0,s.jsx)("p",{className:"text-neutral-400 text-xs sm:text-sm mb-4 sm:mb-6",children:"Visualize seu hist\xf3rico de registros e relat\xf3rios mensais"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(k.z,{variant:"secondary",className:"w-full mt-auto",children:"Ver Hist\xf3rico"})]})}),(0,s.jsx)(l.default,{href:"/employee/justifications",children:(0,s.jsx)(w.Zb,{variant:"glass",className:"group hover:scale-105 transition-all duration-200 cursor-pointer h-full",children:(0,s.jsxs)(w.aY,{className:"p-8 text-center flex flex-col h-full",children:[(0,s.jsx)("div",{className:"bg-warning/20 rounded-2xl w-20 h-20 flex items-center justify-center mx-auto mb-6 group-hover:bg-warning/30 transition-colors",children:(0,s.jsx)(g.Z,{className:"h-10 w-10 text-warning"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Justificativas"}),(0,s.jsx)("p",{className:"text-neutral-400 text-sm mb-6",children:"Justifique atrasos e faltas (>30 min)"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(k.z,{variant:"ghost",className:"w-full border border-warning/30 hover:bg-warning/10 mt-auto",children:"Gerenciar"})]})})})]}),!T&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(w.Zb,{variant:"glass",children:[(0,s.jsx)(w.Ol,{children:(0,s.jsxs)(w.ll,{className:"flex items-center text-white",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-primary"}),"Registros Recentes"]})}),(0,s.jsxs)(w.aY,{children:[(0,s.jsx)("div",{className:"space-y-4",children:D.length>0?D.map(e=>(0,s.jsxs)("div",{className:"rounded-lg bg-neutral-800/30 hover:bg-neutral-800/50 transition-colors overflow-hidden",children:[e.alerts&&e.alerts.length>0&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-l-4 border-red-500 p-3",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 text-red-400 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-red-400 text-xs font-medium mb-1",children:"Aten\xe7\xe3o Necess\xe1ria"}),e.alerts.map((e,t)=>(0,s.jsxs)("p",{className:"text-red-300 text-xs",children:["• ",e.message]},t)),!e.hasJustification&&(0,s.jsx)(l.default,{href:"/employee/justifications",className:"inline-flex items-center text-xs text-red-400 hover:text-red-300 mt-2 underline",children:"Justificar agora"})]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"text-center min-w-[60px]",children:(0,s.jsx)("p",{className:"text-white font-medium",children:e.date})}),(0,s.jsx)("div",{className:"h-8 w-px bg-neutral-600"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[e.entry&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-green-400 font-medium",children:["Entrada: ",e.entry]})]}),e.exit&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"•"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-orange-400 font-medium",children:["Sa\xedda: ",e.exit]})]})]}),!e.entry&&"Ausente"===e.status&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsx)("span",{className:"text-red-400 font-medium",children:"Ausente"})]})]}),(0,s.jsxs)("p",{className:"text-neutral-400 text-xs mt-1 flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),e.location," • Total: ",e.hours]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium ".concat("Completo"===e.status?"bg-success/20 text-success border border-success/30":"Incompleto"===e.status?"bg-warning/20 text-warning border border-warning/30":"Ausente"===e.status?"bg-error/20 text-error border border-error/30":"bg-info/20 text-info border border-info/30"),children:e.status})})]})]},e.id)):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"bg-neutral-800/30 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(j.Z,{className:"h-8 w-8 text-neutral-500"})}),(0,s.jsx)("p",{className:"text-neutral-400 mb-2",children:"Nenhum registro encontrado"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm",children:"Seus registros de ponto aparecer\xe3o aqui"})]})}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(k.z,{variant:"ghost",className:"text-primary hover:text-primary/80",children:"Ver todos os registros"})})]})]})})]})})]}):null}},4226:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var s=a(7437),r=a(2265),i=a(4508);let n=r.forwardRef((e,t)=>{let{className:a,variant:n="primary",size:l="md",loading:o=!1,asChild:c=!1,children:d,disabled:m,...u}=e,x=(0,i.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[n],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[l],o&&"opacity-50 cursor-not-allowed",a);if(c){var h;return r.cloneElement(d,{className:(0,i.cn)(x,null===(h=d.props)||void 0===h?void 0:h.className),...u})}return(0,s.jsxs)("button",{className:x,ref:t,disabled:m||o,...u,children:[o&&(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),d]})});n.displayName="Button"},9178:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var s=a(7437),r=a(2265),i=a(4508);let n=r.forwardRef((e,t)=>{let{className:a,variant:r="default",children:n,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],a),...l,children:n})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},3214:function(e,t,a){"use strict";a.d(t,{gb:function(){return i}});var s=a(7437);a(2265);var r=a(4508);function i(e){let{size:t="md",className:a,text:i}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",a),children:[(0,s.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),i&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:i})]})}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var s=a(1994),r=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},2252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8736:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9637:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},7692:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2369:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[554,605,981,971,117,744],function(){return e(e.s=669)}),_N_E=e.O()}]);