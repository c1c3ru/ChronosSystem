(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{1873:function(e,a,s){Promise.resolve().then(s.bind(s,8921))},8921:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return v}});var t=s(7437),r=s(605),n=s(9376),l=s(2265),i=s(7648),o=s(2660),d=s(2369),c=s(9345),u=s(6337),m=s(8906),x=s(3229),h=s(9178),p=s(4226),f=s(3214);function v(e){let{params:a}=e,{data:s,status:v}=(0,r.useSession)(),j=(0,n.useRouter)(),[N,b]=(0,l.useState)(null),[y,g]=(0,l.useState)({}),[w,E]=(0,l.useState)(!0),[S,k]=(0,l.useState)(!1),[R,O]=(0,l.useState)({});(0,l.useEffect)(()=>{"loading"===v||s||(0,r.signIn)()},[v]),(0,l.useEffect)(()=>{var e;s&&!["ADMIN","SUPERVISOR"].includes(null===(e=s.user)||void 0===e?void 0:e.role)&&j.push("/employee")},[s]),(0,l.useEffect)(()=>{var e;s&&["ADMIN","SUPERVISOR"].includes(null===(e=s.user)||void 0===e?void 0:e.role)&&C()},[s,a.id]);let C=async()=>{try{E(!0);let e=await fetch("/api/users/".concat(a.id));if(e.ok){let a=await e.json();b(a),g({name:a.name,email:a.email,role:a.role,phone:a.phone||"",address:a.address||"",department:a.department||""})}else j.push("/admin/users")}catch(e){j.push("/admin/users")}finally{E(!1)}},I=()=>{let e={};return y.name&&y.name.length<2&&(e.name="Nome deve ter pelo menos 2 caracteres"),y.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)&&(e.email="Email inv\xe1lido"),y.password&&y.password.length<6&&(e.password="Senha deve ter pelo menos 6 caracteres"),O(e),0===Object.keys(e).length},Z=async e=>{if(e.preventDefault(),I())try{k(!0);let e={};y.name!==(null==N?void 0:N.name)&&(e.name=y.name),y.email!==(null==N?void 0:N.email)&&(e.email=y.email),y.role!==(null==N?void 0:N.role)&&(e.role=y.role),y.phone!==(null==N?void 0:N.phone)&&(e.phone=y.phone),y.address!==(null==N?void 0:N.address)&&(e.address=y.address),y.department!==(null==N?void 0:N.department)&&(e.department=y.department),y.password&&(e.password=y.password);let s=await fetch("/api/users/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)j.push("/admin/users");else{let e=await s.json();O({general:e.error||"Erro ao atualizar usu\xe1rio"})}}catch(e){O({general:"Erro interno. Tente novamente."})}finally{k(!1)}},A=e=>{switch(e){case"ADMIN":return"text-red-400";case"SUPERVISOR":return"text-yellow-400";case"EMPLOYEE":return"text-blue-400";default:return"text-neutral-400"}},M=e=>{switch(e){case"ADMIN":return"Acesso total ao sistema";case"SUPERVISOR":return"Gerencia usu\xe1rios e relat\xf3rios";case"EMPLOYEE":return"Registro de ponto e justificativas";default:return""}};return"loading"===v||w?(0,t.jsx)(f.gb,{}):s&&N?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,t.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,t.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,t.jsxs)(i.default,{href:"/admin/users",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Voltar aos Usu\xe1rios"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Editar Usu\xe1rio"}),(0,t.jsxs)("p",{className:"text-neutral-400",children:["Atualizar informa\xe7\xf5es de ",N.name]})]})]})})})}),(0,t.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)(h.Zb,{children:[(0,t.jsx)(h.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center",children:(0,t.jsx)(d.Z,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(h.ll,{children:"Atualizar Informa\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-neutral-400 text-sm",children:"Modifique apenas os campos que deseja alterar"})]})]})}),(0,t.jsx)(h.aY,{children:(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[R.general&&(0,t.jsx)("div",{className:"p-4 bg-error/20 border border-error/50 rounded-lg text-error text-sm",children:R.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Nome Completo"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Nome completo do usu\xe1rio",className:"input pl-10 ".concat(R.name?"border-error":""),value:y.name||"",onChange:e=>g(a=>({...a,name:e.target.value}))})]}),R.name&&(0,t.jsx)("p",{className:"text-error text-xs mt-1",children:R.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,t.jsx)("input",{type:"email",placeholder:"email@exemplo.com",className:"input pl-10 ".concat(R.email?"border-error":""),value:y.email||"",onChange:e=>g(a=>({...a,email:e.target.value}))})]}),R.email&&(0,t.jsx)("p",{className:"text-error text-xs mt-1",children:R.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Nova Senha (Opcional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,t.jsx)("input",{type:"password",placeholder:"Deixe em branco para manter a atual",className:"input pl-10 ".concat(R.password?"border-error":""),value:y.password||"",onChange:e=>g(a=>({...a,password:e.target.value}))})]}),R.password&&(0,t.jsx)("p",{className:"text-error text-xs mt-1",children:R.password})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"N\xedvel de Acesso"}),(0,t.jsx)("div",{className:"space-y-3",children:["EMPLOYEE","SUPERVISOR","ADMIN"].map(e=>(0,t.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer p-3 rounded-lg border border-neutral-700 hover:border-neutral-600 transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"role",value:e,checked:y.role===e,onChange:e=>g(a=>({...a,role:e.target.value})),className:"w-4 h-4 text-primary bg-neutral-700 border-neutral-600 focus:ring-primary mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-neutral-400"}),(0,t.jsx)("span",{className:"font-medium ".concat(A(e)),children:"EMPLOYEE"===e?"Estagi\xe1rio":"SUPERVISOR"===e?"Supervisor":"Administrador"})]}),(0,t.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:M(e)})]})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Informa\xe7\xf5es Adicionais"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Telefone"}),(0,t.jsx)("input",{type:"tel",placeholder:"(11) 99999-9999",className:"input",value:y.phone||"",onChange:e=>g(a=>({...a,phone:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Departamento"}),(0,t.jsxs)("select",{className:"input",value:y.department||"",onChange:e=>g(a=>({...a,department:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Selecione o departamento"}),(0,t.jsx)("option",{value:"TI",children:"Tecnologia da Informa\xe7\xe3o"}),(0,t.jsx)("option",{value:"RH",children:"Recursos Humanos"}),(0,t.jsx)("option",{value:"FINANCEIRO",children:"Financeiro"}),(0,t.jsx)("option",{value:"MARKETING",children:"Marketing"}),(0,t.jsx)("option",{value:"VENDAS",children:"Vendas"}),(0,t.jsx)("option",{value:"OPERACOES",children:"Opera\xe7\xf5es"}),(0,t.jsx)("option",{value:"JURIDICO",children:"Jur\xeddico"}),(0,t.jsx)("option",{value:"OUTROS",children:"Outros"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Endere\xe7o"}),(0,t.jsx)("textarea",{placeholder:"Endere\xe7o completo",className:"input min-h-[80px] resize-none",value:y.address||"",onChange:e=>g(a=>({...a,address:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-neutral-700",children:[(0,t.jsx)(p.z,{asChild:!0,variant:"ghost",children:(0,t.jsx)(i.default,{href:"/admin/users",children:"Cancelar"})}),(0,t.jsx)(p.z,{type:"submit",disabled:S,className:"min-w-[150px]",children:S?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Salvando..."})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})})]})})})]}):null}},4226:function(e,a,s){"use strict";s.d(a,{z:function(){return l}});var t=s(7437),r=s(2265),n=s(4508);let l=r.forwardRef((e,a)=>{let{className:s,variant:l="primary",size:i="md",loading:o=!1,asChild:d=!1,children:c,disabled:u,...m}=e,x=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[l],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],o&&"opacity-50 cursor-not-allowed",s);if(d){var h;return r.cloneElement(c,{className:(0,n.cn)(x,null===(h=c.props)||void 0===h?void 0:h.className),...m})}return(0,t.jsxs)("button",{className:x,ref:a,disabled:u||o,...m,children:[o&&(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),c]})});l.displayName="Button"},9178:function(e,a,s){"use strict";s.d(a,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var t=s(7437),r=s(2265),n=s(4508);let l=r.forwardRef((e,a)=>{let{className:s,variant:r="default",children:l,...i}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],s),...i,children:l})});l.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3214:function(e,a,s){"use strict";s.d(a,{gb:function(){return n}});var t=s(7437);s(2265);var r=s(4508);function n(e){let{size:a="md",className:s,text:n}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",s),children:[(0,t.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[a])}),n&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,a,s){"use strict";s.d(a,{cn:function(){return n}});var t=s(1994),r=s(3335);function n(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.m6)((0,t.W)(a))}},2660:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6337:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3229:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8906:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2369:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,a,s){"use strict";var t=s(5475);s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[605,451,137,971,117,744],function(){return e(e.s=1873)}),_N_E=e.O()}]);