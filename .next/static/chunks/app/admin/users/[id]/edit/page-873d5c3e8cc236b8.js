(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{1873:function(e,t,a){Promise.resolve().then(a.bind(a,8921))},8921:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(7437),r=a(605),n=a(9376),l=a(2265),i=a(7648),o=a(2660),d=a(2369),c=a(9345),u=a(6337),m=a(8906),x=a(3229),h=a(9178),p=a(4226),f=a(3214);function v(e){let{params:t}=e,{data:a,status:v}=(0,r.useSession)(),j=(0,n.useRouter)(),[N,b]=(0,l.useState)(null),[y,g]=(0,l.useState)({}),[w,E]=(0,l.useState)(!0),[k,R]=(0,l.useState)(!1),[S,O]=(0,l.useState)({});(0,l.useEffect)(()=>{"loading"===v||a||(0,r.signIn)()},[v]),(0,l.useEffect)(()=>{var e;a&&!["ADMIN","SUPERVISOR"].includes(null===(e=a.user)||void 0===e?void 0:e.role)&&j.push("/employee")},[a]),(0,l.useEffect)(()=>{var e;a&&["ADMIN","SUPERVISOR"].includes(null===(e=a.user)||void 0===e?void 0:e.role)&&C()},[a,t.id]);let C=async()=>{try{E(!0);let e=await fetch("/api/users/".concat(t.id));if(e.ok){let t=await e.json();b(t),g({name:t.name,email:t.email,role:t.role,phone:t.phone||"",address:t.address||"",department:t.department||""})}else j.push("/admin/users")}catch(e){console.error("Erro ao carregar usu\xe1rio:",e),j.push("/admin/users")}finally{E(!1)}},I=()=>{let e={};return y.name&&y.name.length<2&&(e.name="Nome deve ter pelo menos 2 caracteres"),y.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)&&(e.email="Email inv\xe1lido"),y.password&&y.password.length<6&&(e.password="Senha deve ter pelo menos 6 caracteres"),O(e),0===Object.keys(e).length},Z=async e=>{if(e.preventDefault(),I())try{R(!0);let e={};y.name!==(null==N?void 0:N.name)&&(e.name=y.name),y.email!==(null==N?void 0:N.email)&&(e.email=y.email),y.role!==(null==N?void 0:N.role)&&(e.role=y.role),y.phone!==(null==N?void 0:N.phone)&&(e.phone=y.phone),y.address!==(null==N?void 0:N.address)&&(e.address=y.address),y.department!==(null==N?void 0:N.department)&&(e.department=y.department),y.password&&(e.password=y.password);let a=await fetch("/api/users/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)j.push("/admin/users");else{let e=await a.json();O({general:e.error||"Erro ao atualizar usu\xe1rio"})}}catch(e){O({general:"Erro interno. Tente novamente."})}finally{R(!1)}},A=e=>{switch(e){case"ADMIN":return"text-red-400";case"SUPERVISOR":return"text-yellow-400";case"EMPLOYEE":return"text-blue-400";default:return"text-neutral-400"}},M=e=>{switch(e){case"ADMIN":return"Acesso total ao sistema";case"SUPERVISOR":return"Gerencia usu\xe1rios e relat\xf3rios";case"EMPLOYEE":return"Registro de ponto e justificativas";default:return""}};return"loading"===v||w?(0,s.jsx)(f.gb,{}):a&&N?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,s.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,s.jsxs)(i.default,{href:"/admin/users",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Voltar aos Usu\xe1rios"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Editar Usu\xe1rio"}),(0,s.jsxs)("p",{className:"text-neutral-400",children:["Atualizar informa\xe7\xf5es de ",N.name]})]})]})})})}),(0,s.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)(h.Zb,{children:[(0,s.jsx)(h.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"h-6 w-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.ll,{children:"Atualizar Informa\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-neutral-400 text-sm",children:"Modifique apenas os campos que deseja alterar"})]})]})}),(0,s.jsx)(h.aY,{children:(0,s.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[S.general&&(0,s.jsx)("div",{className:"p-4 bg-error/20 border border-error/50 rounded-lg text-error text-sm",children:S.general}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Nome Completo"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Nome completo do usu\xe1rio",className:"input pl-10 ".concat(S.name?"border-error":""),value:y.name||"",onChange:e=>g(t=>({...t,name:e.target.value}))})]}),S.name&&(0,s.jsx)("p",{className:"text-error text-xs mt-1",children:S.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,s.jsx)("input",{type:"email",placeholder:"email@exemplo.com",className:"input pl-10 ".concat(S.email?"border-error":""),value:y.email||"",onChange:e=>g(t=>({...t,email:e.target.value}))})]}),S.email&&(0,s.jsx)("p",{className:"text-error text-xs mt-1",children:S.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Nova Senha (Opcional)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,s.jsx)("input",{type:"password",placeholder:"Deixe em branco para manter a atual",className:"input pl-10 ".concat(S.password?"border-error":""),value:y.password||"",onChange:e=>g(t=>({...t,password:e.target.value}))})]}),S.password&&(0,s.jsx)("p",{className:"text-error text-xs mt-1",children:S.password})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"N\xedvel de Acesso"}),(0,s.jsx)("div",{className:"space-y-3",children:["EMPLOYEE","SUPERVISOR","ADMIN"].map(e=>(0,s.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer p-3 rounded-lg border border-neutral-700 hover:border-neutral-600 transition-colors",children:[(0,s.jsx)("input",{type:"radio",name:"role",value:e,checked:y.role===e,onChange:e=>g(t=>({...t,role:e.target.value})),className:"w-4 h-4 text-primary bg-neutral-700 border-neutral-600 focus:ring-primary mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-neutral-400"}),(0,s.jsx)("span",{className:"font-medium ".concat(A(e)),children:"EMPLOYEE"===e?"Estagi\xe1rio":"SUPERVISOR"===e?"Supervisor":"Administrador"})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:M(e)})]})]},e))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Informa\xe7\xf5es Adicionais"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Telefone"}),(0,s.jsx)("input",{type:"tel",placeholder:"(11) 99999-9999",className:"input",value:y.phone||"",onChange:e=>g(t=>({...t,phone:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Departamento"}),(0,s.jsxs)("select",{className:"input",value:y.department||"",onChange:e=>g(t=>({...t,department:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Selecione o departamento"}),(0,s.jsx)("option",{value:"TI",children:"Tecnologia da Informa\xe7\xe3o"}),(0,s.jsx)("option",{value:"RH",children:"Recursos Humanos"}),(0,s.jsx)("option",{value:"FINANCEIRO",children:"Financeiro"}),(0,s.jsx)("option",{value:"MARKETING",children:"Marketing"}),(0,s.jsx)("option",{value:"VENDAS",children:"Vendas"}),(0,s.jsx)("option",{value:"OPERACOES",children:"Opera\xe7\xf5es"}),(0,s.jsx)("option",{value:"JURIDICO",children:"Jur\xeddico"}),(0,s.jsx)("option",{value:"OUTROS",children:"Outros"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Endere\xe7o"}),(0,s.jsx)("textarea",{placeholder:"Endere\xe7o completo",className:"input min-h-[80px] resize-none",value:y.address||"",onChange:e=>g(t=>({...t,address:e.target.value}))})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-neutral-700",children:[(0,s.jsx)(p.z,{asChild:!0,variant:"ghost",children:(0,s.jsx)(i.default,{href:"/admin/users",children:"Cancelar"})}),(0,s.jsx)(p.z,{type:"submit",disabled:k,className:"min-w-[150px]",children:k?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Salvando..."})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})})]})})})]}):null}},4226:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var s=a(7437),r=a(2265),n=a(4508);let l=r.forwardRef((e,t)=>{let{className:a,variant:l="primary",size:i="md",loading:o=!1,asChild:d=!1,children:c,disabled:u,...m}=e,x=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[l],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],o&&"opacity-50 cursor-not-allowed",a);if(d){var h;return r.cloneElement(c,{className:(0,n.cn)(x,null===(h=c.props)||void 0===h?void 0:h.className),...m})}return(0,s.jsxs)("button",{className:x,ref:t,disabled:u||o,...m,children:[o&&(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),c]})});l.displayName="Button"},9178:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var s=a(7437),r=a(2265),n=a(4508);let l=r.forwardRef((e,t)=>{let{className:a,variant:r="default",children:l,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],a),...i,children:l})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},3214:function(e,t,a){"use strict";a.d(t,{gb:function(){return n}});var s=a(7437);a(2265);var r=a(4508);function n(e){let{size:t="md",className:a,text:n}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",a),children:[(0,s.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),n&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6337:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3229:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2369:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[554,605,972,971,117,744],function(){return e(e.s=1873)}),_N_E=e.O()}]);