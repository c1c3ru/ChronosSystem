(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{6630:function(e,s,t){Promise.resolve().then(t.bind(t,1473))},1473:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var r=t(7437),a=t(605),n=t(9376),l=t(2265),i=t(7648),c=t(2660),d=t(7806),u=t(3247);let o=(0,t(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=t(5805),x=t(4630),h=t(8930),f=t(9178),p=t(4226),j=t(3214);function v(){let{data:e,status:s}=(0,a.useSession)(),t=(0,n.useRouter)(),[v,y]=(0,l.useState)([]),[N,b]=(0,l.useState)(!0),[g,w]=(0,l.useState)(""),[k,Z]=(0,l.useState)("ALL");(0,l.useEffect)(()=>{"loading"===s||e||(0,a.signIn)()},[s]),(0,l.useEffect)(()=>{var s;e&&!["ADMIN","SUPERVISOR"].includes(null===(s=e.user)||void 0===s?void 0:s.role)&&t.push("/employee")},[e]),(0,l.useEffect)(()=>{var s;e&&["ADMIN","SUPERVISOR"].includes(null===(s=e.user)||void 0===s?void 0:s.role)&&C()},[e]);let C=async()=>{try{b(!0);let e=await fetch("/api/users");if(e.ok){let s=await e.json();y(s.users||[])}}catch(e){}finally{b(!1)}},R=async e=>{if(confirm("Tem certeza que deseja excluir este usu\xe1rio?"))try{(await fetch("/api/users/".concat(e),{method:"DELETE"})).ok&&C()}catch(e){}},S=(v||[]).filter(e=>{let s=e.name.toLowerCase().includes(g.toLowerCase())||e.email.toLowerCase().includes(g.toLowerCase()),t="ALL"===k||e.role===k;return s&&t});return"loading"===s||N?(0,r.jsx)(j.gb,{}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,r.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,r.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,r.jsxs)(i.default,{href:"/admin",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Gerenciar Usu\xe1rios"}),(0,r.jsx)("p",{className:"text-neutral-400",children:"Administre usu\xe1rios do sistema"})]})]}),(0,r.jsx)(p.z,{asChild:!0,children:(0,r.jsxs)(i.default,{href:"/admin/users/new",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Novo Usu\xe1rio"]})})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,r.jsx)(f.Zb,{className:"mb-6",children:(0,r.jsx)(f.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",className:"input pl-10 w-full",value:g,onChange:e=>w(e.target.value)})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o,{className:"h-4 w-4 text-neutral-400"}),(0,r.jsxs)("select",{className:"input",value:k,onChange:e=>Z(e.target.value),children:[(0,r.jsx)("option",{value:"ALL",children:"Todos os Roles"}),(0,r.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,r.jsx)("option",{value:"SUPERVISOR",children:"Supervisor"}),(0,r.jsx)("option",{value:"EMPLOYEE",children:"Estagi\xe1rio"})]})]})]})})}),(0,r.jsx)("div",{className:"grid gap-4",children:S.map(e=>(0,r.jsx)(f.Zb,{children:(0,r.jsx)(f.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 rounded-full"}):(0,r.jsx)(m.Z,{className:"h-6 w-6 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-white",children:e.name}),(0,r.jsx)("p",{className:"text-neutral-400",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ADMIN"===e.role?"bg-red-500/20 text-red-400":"SUPERVISOR"===e.role?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:e.role}),(0,r.jsxs)("span",{className:"text-xs text-neutral-500",children:["Criado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,r.jsx)(i.default,{href:"/admin/users/".concat(e.id,"/edit"),children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>R(e.id),className:"text-red-400 hover:text-red-300",children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})]})]})})},e.id))}),0===S.length&&(0,r.jsx)(f.Zb,{children:(0,r.jsxs)(f.aY,{className:"p-12 text-center",children:[(0,r.jsx)(m.Z,{className:"h-12 w-12 text-neutral-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhum usu\xe1rio encontrado"}),(0,r.jsx)("p",{className:"text-neutral-400 mb-4",children:g||"ALL"!==k?"Tente ajustar os filtros de busca":"Comece criando o primeiro usu\xe1rio"}),!g&&"ALL"===k&&(0,r.jsx)(p.z,{asChild:!0,children:(0,r.jsxs)(i.default,{href:"/admin/users/new",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Criar Primeiro Usu\xe1rio"]})})]})})]})]}):null}},4226:function(e,s,t){"use strict";t.d(s,{z:function(){return l}});var r=t(7437),a=t(2265),n=t(4508);let l=a.forwardRef((e,s)=>{let{className:t,variant:l="primary",size:i="md",loading:c=!1,asChild:d=!1,children:u,disabled:o,...m}=e,x=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[l],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],c&&"opacity-50 cursor-not-allowed",t);if(d){var h;return a.cloneElement(u,{className:(0,n.cn)(x,null===(h=u.props)||void 0===h?void 0:h.className),...m})}return(0,r.jsxs)("button",{className:x,ref:s,disabled:o||c,...m,children:[c&&(0,r.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),u]})});l.displayName="Button"},9178:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var r=t(7437),a=t(2265),n=t(4508);let l=a.forwardRef((e,s)=>{let{className:t,variant:a="default",children:l,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[a],t),...i,children:l})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})}).displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},3214:function(e,s,t){"use strict";t.d(s,{gb:function(){return n}});var r=t(7437);t(2265);var a=t(4508);function n(e){let{size:s="md",className:t,text:n}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("flex flex-col items-center justify-center space-y-2",t),children:[(0,r.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s])}),n&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var r=t(1994),a=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4630:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3247:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7806:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[605,451,137,971,117,744],function(){return e(e.s=6630)}),_N_E=e.O()}]);