(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{1639:function(e,s,t){Promise.resolve().then(t.bind(t,7297))},7297:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(7437),r=t(605),n=t(9376),l=t(2265),i=t(7648),c=t(2660),d=t(2735),o=t(5805),x=t(1723),u=t(3639),m=t(525),h=t(8736),f=t(1047),j=t(9178),p=t(4226),v=t(3214);function y(){let{data:e,status:s}=(0,r.useSession)(),t=(0,n.useRouter)(),[y,N]=(0,l.useState)(null),[b,w]=(0,l.useState)(!0),[g,k]=(0,l.useState)("30"),[Z,R]=(0,l.useState)("ALL");(0,l.useEffect)(()=>{"loading"===s||e||(0,r.signIn)()},[s]),(0,l.useEffect)(()=>{var s;e&&!["ADMIN","SUPERVISOR"].includes(null===(s=e.user)||void 0===s?void 0:s.role)&&t.push("/employee")},[e]),(0,l.useEffect)(()=>{var s;e&&["ADMIN","SUPERVISOR"].includes(null===(s=e.user)||void 0===s?void 0:s.role)&&C()},[e,g,Z]);let C=async()=>{try{w(!0);let e=await fetch("/api/reports?period=".concat(g,"&user=").concat(Z));if(e.ok){let s=await e.json();N(s)}}catch(e){}finally{w(!1)}},S=async e=>{try{let s=await fetch("/api/reports/download?format=".concat(e,"&period=").concat(g,"&user=").concat(Z));if(s.ok){let t=await s.blob(),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="relatorio-ponto-".concat(new Date().toISOString().split("T")[0],".").concat(e),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}}catch(e){}};return"loading"===s||b?(0,a.jsx)(v.gb,{}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,a.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(p.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(i.default,{href:"/admin",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Relat\xf3rios"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"An\xe1lise de dados de ponto"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(p.z,{onClick:()=>S("csv"),variant:"ghost",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"CSV"]}),(0,a.jsxs)(p.z,{onClick:()=>S("pdf"),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsx)(j.Zb,{className:"mb-6",children:(0,a.jsx)(j.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Per\xedodo"}),(0,a.jsxs)("select",{className:"input",value:g,onChange:e=>k(e.target.value),children:[(0,a.jsx)("option",{value:"7",children:"\xdaltimos 7 dias"}),(0,a.jsx)("option",{value:"30",children:"\xdaltimos 30 dias"}),(0,a.jsx)("option",{value:"90",children:"\xdaltimos 90 dias"}),(0,a.jsx)("option",{value:"365",children:"\xdaltimo ano"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Usu\xe1rio"}),(0,a.jsxs)("select",{className:"input",value:Z,onChange:e=>R(e.target.value),children:[(0,a.jsx)("option",{value:"ALL",children:"Todos os usu\xe1rios"}),(0,a.jsx)("option",{value:"EMPLOYEE",children:"Apenas estagi\xe1rios"}),(0,a.jsx)("option",{value:"SUPERVISOR",children:"Apenas supervisores"})]})]})]})})}),y&&(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,a.jsx)(j.Zb,{children:(0,a.jsx)(j.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-400",children:"Total de Usu\xe1rios"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:y.totalUsers})]}),(0,a.jsx)(o.Z,{className:"h-8 w-8 text-primary"})]})})}),(0,a.jsx)(j.Zb,{children:(0,a.jsx)(j.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-400",children:"Registros de Ponto"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:y.totalRecords})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-success"})]})})}),(0,a.jsx)(j.Zb,{children:(0,a.jsx)(j.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-400",children:"Atrasos"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-warning",children:y.lateRecords})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-warning"})]})})}),(0,a.jsx)(j.Zb,{children:(0,a.jsx)(j.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-400",children:"Faltas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-error",children:y.absences})]}),(0,a.jsx)(m.Z,{className:"h-8 w-8 text-error"})]})})})]}),y&&y.monthlyData&&(0,a.jsxs)(j.Zb,{className:"mb-6",children:[(0,a.jsx)(j.Ol,{children:(0,a.jsx)(j.ll,{children:"Registros por M\xeas"})}),(0,a.jsx)(j.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:y.monthlyData.map((e,s)=>(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:e.month}),(0,a.jsxs)("span",{className:"text-sm text-neutral-400",children:[e.records," registros"]})]}),(0,a.jsx)("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:"".concat(Math.min(e.records/Math.max(...y.monthlyData.map(e=>e.records))*100,100),"%")}})}),e.lateRecords>0&&(0,a.jsxs)("div",{className:"text-xs text-warning mt-1",children:[e.lateRecords," atrasos"]})]})},s))})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(j.Zb,{children:(0,a.jsxs)(j.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Relat\xf3rio Detalhado"}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Visualizar todos os registros"})]})]}),(0,a.jsx)(p.z,{asChild:!0,className:"w-full mt-4",variant:"ghost",children:(0,a.jsx)(i.default,{href:"/admin/reports/detailed",children:"Ver Detalhes"})})]})}),(0,a.jsx)(j.Zb,{children:(0,a.jsxs)(j.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-warning"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Justificativas"}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Atrasos e faltas pendentes"})]})]}),(0,a.jsx)(p.z,{asChild:!0,className:"w-full mt-4",variant:"ghost",children:(0,a.jsx)(i.default,{href:"/admin/reports/justifications",children:"Ver Justificativas"})})]})}),(0,a.jsx)(j.Zb,{children:(0,a.jsxs)(j.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-success"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Frequ\xeancia"}),(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"An\xe1lise de frequ\xeancia mensal"})]})]}),(0,a.jsx)(p.z,{asChild:!0,className:"w-full mt-4",variant:"ghost",children:(0,a.jsx)(i.default,{href:"/admin/reports/frequency",children:"Ver Frequ\xeancia"})})]})})]})]})]}):null}},4226:function(e,s,t){"use strict";t.d(s,{z:function(){return l}});var a=t(7437),r=t(2265),n=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,variant:l="primary",size:i="md",loading:c=!1,asChild:d=!1,children:o,disabled:x,...u}=e,m=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[l],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],c&&"opacity-50 cursor-not-allowed",t);if(d){var h;return r.cloneElement(o,{className:(0,n.cn)(m,null===(h=o.props)||void 0===h?void 0:h.className),...u})}return(0,a.jsxs)("button",{className:m,ref:s,disabled:x||c,...u,children:[c&&(0,a.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),o]})});l.displayName="Button"},9178:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var a=t(7437),r=t(2265),n=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,variant:r="default",children:l,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],t),...i,children:l})});l.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},3214:function(e,s,t){"use strict";t.d(s,{gb:function(){return n}});var a=t(7437);t(2265);var r=t(4508);function n(e){let{size:s="md",className:t,text:n}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",t),children:[(0,a.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s])}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[554,605,981,971,117,744],function(){return e(e.s=1639)}),_N_E=e.O()}]);