(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[801],{4307:function(e,t,s){Promise.resolve().then(s.bind(s,5918))},5918:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(605),n=s(9376),l=s(2265),i=s(7648),c=s(2660),d=s(2735),o=s(3247),u=s(1047),x=s(8736),m=s(1723),h=s(2369),p=s(3774),f=s(9178),j=s(4226),y=s(3214);function N(){let{data:e,status:t}=(0,r.useSession)(),s=(0,n.useRouter)(),[N,v]=(0,l.useState)([]),[b,g]=(0,l.useState)(!0),[w,k]=(0,l.useState)(""),[Z,R]=(0,l.useState)(""),[E,L]=(0,l.useState)("ALL"),[S,C]=(0,l.useState)("ALL");(0,l.useEffect)(()=>{"loading"===t||e||(0,r.signIn)()},[t]),(0,l.useEffect)(()=>{var t;e&&!["ADMIN","SUPERVISOR"].includes(null===(t=e.user)||void 0===t?void 0:t.role)&&s.push("/employee")},[e]),(0,l.useEffect)(()=>{var t;e&&["ADMIN","SUPERVISOR"].includes(null===(t=e.user)||void 0===t?void 0:t.role)&&D()},[e]);let D=async()=>{try{g(!0);let e=await fetch("/api/attendance/detailed");if(e.ok){let t=await e.json();v(t)}}catch(e){console.error("Erro ao carregar registros detalhados:",e)}finally{g(!1)}},T=N.filter(e=>{let t=e.user.name.toLowerCase().includes(w.toLowerCase())||e.user.email.toLowerCase().includes(w.toLowerCase())||e.machine.name.toLowerCase().includes(w.toLowerCase()),s=!Z||new Date(e.timestamp).toDateString()===new Date(Z).toDateString(),a="ALL"===E||e.type===E,r="ALL"===S||e.user.role===S;return t&&s&&a&&r}),A=e=>"ENTRY"===e?"text-success bg-success/20":"text-error bg-error/20",M=e=>"ENTRY"===e?"Entrada":"Sa\xedda",Y=e=>{switch(e){case"ADMIN":return"text-red-400 bg-red-400/20";case"SUPERVISOR":return"text-yellow-400 bg-yellow-400/20";case"EMPLOYEE":return"text-blue-400 bg-blue-400/20";default:return"text-neutral-400 bg-neutral-400/20"}};return"loading"===t||b?(0,a.jsx)(y.gb,{}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,a.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(j.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(i.default,{href:"/admin/reports",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Voltar aos Relat\xf3rios"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Relat\xf3rio Detalhado"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"Visualiza\xe7\xe3o completa dos registros de ponto"})]})]}),(0,a.jsxs)(j.z,{onClick:()=>window.print(),variant:"ghost",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Imprimir"]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsx)(f.Zb,{className:"mb-6",children:(0,a.jsx)(f.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Buscar"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Nome, email ou m\xe1quina...",className:"input pl-10",value:w,onChange:e=>k(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Data"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,a.jsx)("input",{type:"date",className:"input pl-10",value:Z,onChange:e=>R(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Tipo"}),(0,a.jsxs)("select",{className:"input",value:E,onChange:e=>L(e.target.value),children:[(0,a.jsx)("option",{value:"ALL",children:"Todos"}),(0,a.jsx)("option",{value:"ENTRY",children:"Entrada"}),(0,a.jsx)("option",{value:"EXIT",children:"Sa\xedda"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Role"}),(0,a.jsxs)("select",{className:"input",value:S,onChange:e=>C(e.target.value),children:[(0,a.jsx)("option",{value:"ALL",children:"Todos"}),(0,a.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,a.jsx)("option",{value:"SUPERVISOR",children:"Supervisor"}),(0,a.jsx)("option",{value:"EMPLOYEE",children:"Estagi\xe1rio"})]})]})]})})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[(0,a.jsx)(f.Zb,{children:(0,a.jsx)(f.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Total"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:T.length})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-primary"})]})})}),(0,a.jsx)(f.Zb,{children:(0,a.jsx)(f.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Entradas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-success",children:T.filter(e=>"ENTRY"===e.type).length})]}),(0,a.jsx)(m.Z,{className:"h-8 w-8 text-success"})]})})}),(0,a.jsx)(f.Zb,{children:(0,a.jsx)(f.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Sa\xeddas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-error",children:T.filter(e=>"EXIT"===e.type).length})]}),(0,a.jsx)(m.Z,{className:"h-8 w-8 text-error"})]})})}),(0,a.jsx)(f.Zb,{children:(0,a.jsx)(f.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Usu\xe1rios"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:new Set(T.map(e=>e.user.email)).size})]}),(0,a.jsx)(h.Z,{className:"h-8 w-8 text-primary"})]})})})]}),(0,a.jsxs)(f.Zb,{children:[(0,a.jsx)(f.Ol,{children:(0,a.jsx)(f.ll,{children:"Registros Detalhados"})}),(0,a.jsx)(f.aY,{children:T.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-neutral-700",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"Data/Hora"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"Usu\xe1rio"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"Role"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"Tipo"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"M\xe1quina"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-neutral-300 font-medium",children:"Localiza\xe7\xe3o"})]})}),(0,a.jsx)("tbody",{children:T.map(e=>(0,a.jsxs)("tr",{className:"border-b border-neutral-800 hover:bg-neutral-800/30",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-white",children:new Date(e.timestamp).toLocaleString("pt-BR")}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:e.user.name}),(0,a.jsx)("p",{className:"text-neutral-400 text-sm",children:e.user.email})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(Y(e.user.role)),children:e.user.role})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(A(e.type)),children:M(e.type)})}),(0,a.jsx)("td",{className:"py-3 px-4 text-white",children:e.machine.name}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center text-neutral-400",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),e.machine.location]})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-neutral-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhum registro encontrado"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"Tente ajustar os filtros para encontrar registros"})]})})]})]})]}):null}},4226:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var a=s(7437),r=s(2265),n=s(4508);let l=r.forwardRef((e,t)=>{let{className:s,variant:l="primary",size:i="md",loading:c=!1,asChild:d=!1,children:o,disabled:u,...x}=e,m=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[l],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],c&&"opacity-50 cursor-not-allowed",s);if(d){var h;return r.cloneElement(o,{className:(0,n.cn)(m,null===(h=o.props)||void 0===h?void 0:h.className),...x})}return(0,a.jsxs)("button",{className:m,ref:t,disabled:u||c,...x,children:[c&&(0,a.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),o]})});l.displayName="Button"},9178:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var a=s(7437),r=s(2265),n=s(4508);let l=r.forwardRef((e,t)=>{let{className:s,variant:r="default",children:l,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],s),...i,children:l})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3214:function(e,t,s){"use strict";s.d(t,{gb:function(){return n}});var a=s(7437);s(2265);var r=s(4508);function n(e){let{size:t="md",className:s,text:n}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",s),children:[(0,a.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[554,605,972,971,117,744],function(){return e(e.s=4307)}),_N_E=e.O()}]);