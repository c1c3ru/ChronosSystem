(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{5005:function(e,a,t){Promise.resolve().then(t.bind(t,970))},970:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var r=t(7437),s=t(605),n=t(9376),i=t(2265),l=t(7648),c=t(2660),o=t(9897),d=t(3774),m=t(8728),u=t(3229),x=t(9178),h=t(4226),f=t(3214);function p(){let{data:e,status:a}=(0,s.useSession)(),t=(0,n.useRouter)(),[p,v]=(0,i.useState)({name:"",location:"",isActive:!0}),[j,N]=(0,i.useState)(!1),[b,y]=(0,i.useState)({});(0,i.useEffect)(()=>{"loading"===a||e||(0,s.signIn)()},[a]),(0,i.useEffect)(()=>{var a;e&&!["ADMIN","SUPERVISOR"].includes(null===(a=e.user)||void 0===a?void 0:a.role)&&t.push("/employee")},[e]);let g=()=>{let e={};return p.name.trim()?p.name.length<3&&(e.name="Nome deve ter pelo menos 3 caracteres"):e.name="Nome da m\xe1quina \xe9 obrigat\xf3rio",p.location.trim()?p.location.length<5&&(e.location="Localiza\xe7\xe3o deve ter pelo menos 5 caracteres"):e.location="Localiza\xe7\xe3o \xe9 obrigat\xf3ria",y(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),g())try{N(!0);let e=await fetch("/api/machines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(e.ok)t.push("/admin/machines");else{let a=await e.json();y({general:a.message||"Erro ao criar m\xe1quina"})}}catch(e){y({general:"Erro interno. Tente novamente."})}finally{N(!1)}};return"loading"===a?(0,r.jsx)(f.gb,{}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,r.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,r.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(h.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,r.jsxs)(l.default,{href:"/admin/machines",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Voltar \xe0s M\xe1quinas"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Nova M\xe1quina"}),(0,r.jsx)("p",{className:"text-neutral-400",children:"Adicionar novo terminal de ponto"})]})]})})})}),(0,r.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x.ll,{children:"Configurar Nova M\xe1quina"}),(0,r.jsx)("p",{className:"text-neutral-400 text-sm",children:"Defina o nome e localiza\xe7\xe3o do novo terminal"})]})]})}),(0,r.jsx)(x.aY,{children:(0,r.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[b.general&&(0,r.jsx)("div",{className:"p-4 bg-error/20 border border-error/50 rounded-lg text-error text-sm",children:b.general}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Nome da M\xe1quina *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Ex: Terminal Principal, Kiosk Recep\xe7\xe3o...",className:"input pl-10 ".concat(b.name?"border-error":""),value:p.name,onChange:e=>v(a=>({...a,name:e.target.value}))})]}),b.name&&(0,r.jsx)("p",{className:"text-error text-xs mt-1",children:b.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Localiza\xe7\xe3o *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Z,{className:"absolute left-3 top-3 h-4 w-4 text-neutral-400"}),(0,r.jsx)("textarea",{placeholder:"Ex: Recep\xe7\xe3o - T\xe9rreo, Sala de Reuni\xf5es - 2\xba Andar...",className:"input pl-10 min-h-[80px] resize-none ".concat(b.location?"border-error":""),value:p.location,onChange:e=>v(a=>({...a,location:e.target.value}))})]}),b.location&&(0,r.jsx)("p",{className:"text-error text-xs mt-1",children:b.location})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"Status Inicial"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"isActive",checked:p.isActive,onChange:()=>v(e=>({...e,isActive:!0})),className:"w-4 h-4 text-primary bg-neutral-700 border-neutral-600 focus:ring-primary"}),(0,r.jsx)("span",{className:"text-success text-sm",children:"Ativa"})]}),(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"isActive",checked:!p.isActive,onChange:()=>v(e=>({...e,isActive:!1})),className:"w-4 h-4 text-primary bg-neutral-700 border-neutral-600 focus:ring-primary"}),(0,r.jsx)("span",{className:"text-neutral-500 text-sm",children:"Inativa"})]})]}),(0,r.jsx)("p",{className:"text-neutral-500 text-xs mt-1",children:"M\xe1quinas ativas podem gerar QR codes para registro de ponto"})]}),(0,r.jsx)("div",{className:"bg-neutral-800/30 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 text-neutral-400 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-white mb-2",children:"Configura\xe7\xf5es Autom\xe1ticas"}),(0,r.jsxs)("ul",{className:"text-xs text-neutral-400 space-y-1",children:[(0,r.jsx)("li",{children:"• QR codes ser\xe3o gerados automaticamente a cada 60 segundos"}),(0,r.jsx)("li",{children:"• Registros de ponto ficar\xe3o dispon\xedveis imediatamente"}),(0,r.jsx)("li",{children:"• Logs de auditoria ser\xe3o criados para todas as a\xe7\xf5es"}),(0,r.jsx)("li",{children:"• A m\xe1quina aparecer\xe1 no dashboard administrativo"})]})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-neutral-700",children:[(0,r.jsx)(h.z,{asChild:!0,variant:"ghost",children:(0,r.jsx)(l.default,{href:"/admin/machines",children:"Cancelar"})}),(0,r.jsx)(h.z,{type:"submit",disabled:j,className:"min-w-[150px]",children:j?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Criando..."})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Criar M\xe1quina"})]})})]})]})})]})})})]}):null}},4226:function(e,a,t){"use strict";t.d(a,{z:function(){return i}});var r=t(7437),s=t(2265),n=t(4508);let i=s.forwardRef((e,a)=>{let{className:t,variant:i="primary",size:l="md",loading:c=!1,asChild:o=!1,children:d,disabled:m,...u}=e,x=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[i],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[l],c&&"opacity-50 cursor-not-allowed",t);if(o){var h;return s.cloneElement(d,{className:(0,n.cn)(x,null===(h=d.props)||void 0===h?void 0:h.className),...u})}return(0,r.jsxs)("button",{className:x,ref:a,disabled:m||c,...u,children:[c&&(0,r.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),d]})});i.displayName="Button"},9178:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var r=t(7437),s=t(2265),n=t(4508);let i=s.forwardRef((e,a)=>{let{className:t,variant:s="default",children:i,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[s],t),...l,children:i})});i.displayName="Card";let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...s})});o.displayName="CardContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},3214:function(e,a,t){"use strict";t.d(a,{gb:function(){return n}});var r=t(7437);t(2265);var s=t(4508);function n(e){let{size:a="md",className:t,text:n}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center space-y-2",t),children:[(0,r.jsx)("div",{className:(0,s.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[a])}),n&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var r=t(1994),s=t(3335);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,r.W)(a))}},2660:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3774:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9897:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},3229:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8728:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[554,605,981,971,117,744],function(){return e(e.s=5005)}),_N_E=e.O()}]);