(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{961:function(e,t,s){Promise.resolve().then(s.bind(s,7312))},7312:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(605),n=s(9376),i=s(2265),c=s(7648),l=s(2660),d=s(9397),o=s(3247),u=s(9897),m=s(9763);let h=(0,m.Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),x=(0,m.Z)("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var f=s(4630),p=s(8930),v=s(9178),j=s(4226),y=s(3214);function N(){let{data:e,status:t}=(0,r.useSession)(),s=(0,n.useRouter)(),[m,N]=(0,i.useState)([]),[b,w]=(0,i.useState)(!0),[g,k]=(0,i.useState)("");(0,i.useEffect)(()=>{"loading"===t||e||(0,r.signIn)()},[t]),(0,i.useEffect)(()=>{var t;e&&!["ADMIN","SUPERVISOR"].includes(null===(t=e.user)||void 0===t?void 0:t.role)&&s.push("/employee")},[e]),(0,i.useEffect)(()=>{var t;e&&["ADMIN","SUPERVISOR"].includes(null===(t=e.user)||void 0===t?void 0:t.role)&&Z()},[e]);let Z=async()=>{try{w(!0);let e=await fetch("/api/machines");if(e.ok){let t=await e.json();N(t)}}catch(e){}finally{w(!1)}},C=async(e,t)=>{try{(await fetch("/api/machines/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!t})})).ok&&Z()}catch(e){}},M=async e=>{if(confirm("Tem certeza que deseja excluir esta m\xe1quina?"))try{(await fetch("/api/machines/".concat(e),{method:"DELETE"})).ok&&Z()}catch(e){}},R=m.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.location.toLowerCase().includes(g.toLowerCase()));return"loading"===t||b?(0,a.jsx)(y.gb,{}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900",children:[(0,a.jsx)("div",{className:"bg-neutral-800/50 border-b border-neutral-700",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(j.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(c.default,{href:"/admin",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Gerenciar M\xe1quinas"}),(0,a.jsx)("p",{className:"text-neutral-400",children:"Administre terminais de ponto"})]})]}),(0,a.jsx)(j.z,{asChild:!0,children:(0,a.jsxs)(c.default,{href:"/admin/machines/new",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Nova M\xe1quina"]})})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsx)(v.Zb,{className:"mb-6",children:(0,a.jsx)(v.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por nome ou localiza\xe7\xe3o...",className:"input pl-10 w-full",value:g,onChange:e=>k(e.target.value)})]})})}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:R.map(e=>{var t;return(0,a.jsxs)(v.Zb,{children:[(0,a.jsx)(v.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:e.name})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("button",{onClick:()=>C(e.id,e.isActive),className:"p-1 rounded ".concat(e.isActive?"text-success hover:bg-success/10":"text-neutral-500 hover:bg-neutral-700"),children:e.isActive?(0,a.jsx)(h,{className:"h-4 w-4"}):(0,a.jsx)(x,{className:"h-4 w-4"})})})]})}),(0,a.jsx)(v.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Localiza\xe7\xe3o"}),(0,a.jsx)("p",{className:"text-white",children:e.location})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-success":"bg-neutral-500")}),(0,a.jsx)("span",{className:"text-sm ".concat(e.isActive?"text-success":"text-neutral-500"),children:e.isActive?"Ativa":"Inativa"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Registros"}),(0,a.jsx)("p",{className:"text-white font-medium",children:(null===(t=e._count)||void 0===t?void 0:t.attendanceRecords)||0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-neutral-400",children:"Criada em"}),(0,a.jsx)("p",{className:"text-white text-sm",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-neutral-700",children:[(0,a.jsx)(j.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(c.default,{href:"/admin/machines/".concat(e.id,"/edit"),children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Editar"]})}),(0,a.jsxs)(j.z,{variant:"ghost",size:"sm",onClick:()=>M(e.id),className:"text-red-400 hover:text-red-300",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})})]},e.id)})}),0===R.length&&(0,a.jsx)(v.Zb,{children:(0,a.jsxs)(v.aY,{className:"p-12 text-center",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 text-neutral-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhuma m\xe1quina encontrada"}),(0,a.jsx)("p",{className:"text-neutral-400 mb-4",children:g?"Tente ajustar o termo de busca":"Comece criando a primeira m\xe1quina"}),!g&&(0,a.jsx)(j.z,{asChild:!0,children:(0,a.jsxs)(c.default,{href:"/admin/machines/new",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Criar Primeira M\xe1quina"]})})]})})]})]}):null}},4226:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var a=s(7437),r=s(2265),n=s(4508);let i=r.forwardRef((e,t)=>{let{className:s,variant:i="primary",size:c="md",loading:l=!1,asChild:d=!1,children:o,disabled:u,...m}=e,h=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[i],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[c],l&&"opacity-50 cursor-not-allowed",s);if(d){var x;return r.cloneElement(o,{className:(0,n.cn)(h,null===(x=o.props)||void 0===x?void 0:x.className),...m})}return(0,a.jsxs)("button",{className:h,ref:t,disabled:u||l,...m,children:[l&&(0,a.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),o]})});i.displayName="Button"},9178:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=s(7437),r=s(2265),n=s(4508);let i=r.forwardRef((e,t)=>{let{className:s,variant:r="default",children:i,...c}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)({default:"card",glass:"card glass",elevated:"card shadow-xl hover:shadow-2xl transition-shadow duration-300"}[r],s),...c,children:i})});i.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});c.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3214:function(e,t,s){"use strict";s.d(t,{gb:function(){return n}});var a=s(7437);s(2265);var r=s(4508);function n(e){let{size:t="md",className:s,text:n}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center space-y-2",s),children:[(0,a.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-primary border-t-transparent",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:n})]})}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9897:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},4630:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[554,605,981,971,117,744],function(){return e(e.s=961)}),_N_E=e.O()}]);