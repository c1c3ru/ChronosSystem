"use strict";(()=>{var e={};e.id=3600,e.ids=[3600],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},24678:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var r={};i.r(r),i.d(r,{GET:()=>u,dynamic:()=>p});var a=i(49303),n=i(88716),s=i(60670),o=i(87070),c=i(83493);let p="force-dynamic";async function u(){try{let e=new Date;e.setHours(e.getHours()-24);let t=(await c._.attendanceRecord.findMany({where:{timestamp:{gte:e}},include:{user:{select:{name:!0,email:!0}},machine:{select:{name:!0,location:!0}}},orderBy:{timestamp:"desc"},take:10})).map(e=>({id:e.id,user:e.user.name||e.user.email.split("@")[0],type:e.type,time:e.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),timestamp:e.timestamp,machine:e.machine.name,location:e.machine.location}));return o.NextResponse.json({success:!0,activity:t,count:t.length})}catch(e){return o.NextResponse.json({success:!1,error:"Erro interno do servidor",activity:[],count:0},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/kiosk/recent-activity/route",pathname:"/api/kiosk/recent-activity",filename:"route",bundlePath:"app/api/kiosk/recent-activity/route"},resolvedPagePath:"/home/deppi/ChronosSystem/app/api/kiosk/recent-activity/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=m,y="/api/kiosk/recent-activity/route";function v(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},83493:(e,t,i)=>{i.d(t,{_:()=>a});let r=require("@prisma/client"),a=globalThis.prisma??new r.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[9276,5972],()=>i(24678));module.exports=r})();