"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/middleware */ \"(middleware)/./node_modules/next-auth/middleware.js\");\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_middleware__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_auth_middleware__WEBPACK_IMPORTED_MODULE_0__.withAuth)(function middleware(req) {\n    const { pathname } = req.nextUrl;\n    const token = req.nextauth.token;\n    // Rotas que requerem autenticação\n    const protectedRoutes = [\n        \"/admin\",\n        \"/employee\",\n        \"/api/users\",\n        \"/api/machines\",\n        \"/api/attendance\",\n        \"/api/dashboard\"\n    ];\n    // Verificar se a rota atual é protegida\n    const isProtectedRoute = protectedRoutes.some((route)=>pathname.startsWith(route));\n    if (isProtectedRoute && !token) {\n        // Redirecionar para login se não autenticado\n        const signInUrl = new URL(\"/auth/signin\", req.url);\n        signInUrl.searchParams.set(\"callbackUrl\", pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(signInUrl);\n    }\n    // Verificar se o perfil está completo (apenas para usuários autenticados)\n    if (token) {\n        const profileComplete = token.profileComplete;\n        const role = token.role;\n        console.log(\"Middleware - pathname:\", pathname);\n        console.log(\"Middleware - profileComplete:\", profileComplete);\n        console.log(\"Middleware - role:\", role);\n        console.log(\"Middleware - isProtectedRoute:\", isProtectedRoute);\n        console.log(\"Middleware - token.sub:\", token.sub);\n        // Se usuário autenticado está na página inicial, redirecionar para dashboard apropriado\n        if (pathname === \"/\") {\n            console.log(\"Middleware - Usu\\xe1rio autenticado na p\\xe1gina inicial, redirecionando...\");\n            if (profileComplete === false) {\n                console.log(\"Middleware - Perfil incompleto, redirecionando para complete-profile\");\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/auth/complete-profile\", req.url));\n            }\n            if (role === \"ADMIN\" || role === \"SUPERVISOR\") {\n                console.log(\"Middleware - Redirecionando ADMIN/SUPERVISOR para /admin\");\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/admin\", req.url));\n            } else {\n                console.log(\"Middleware - Redirecionando EMPLOYEE para /employee\");\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/employee\", req.url));\n            }\n        }\n        // Se o perfil está completo e está na página de completar perfil, redirecionar\n        if (profileComplete === true && pathname === \"/auth/complete-profile\") {\n            console.log(\"Middleware - Perfil completo, redirecionando para dashboard\");\n            if (role === \"ADMIN\" || role === \"SUPERVISOR\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/admin\", req.url));\n            } else {\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/employee\", req.url));\n            }\n        }\n        // Se o perfil não está completo e não está na página de completar perfil\n        if (profileComplete === false && isProtectedRoute && pathname !== \"/auth/complete-profile\") {\n            console.log(\"Middleware - Redirecionando para complete-profile\");\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/auth/complete-profile\", req.url));\n        }\n    }\n    // Rotas específicas para roles\n    if (pathname.startsWith(\"/admin\")) {\n        if (!token || ![\n            \"ADMIN\",\n            \"SUPERVISOR\"\n        ].includes(token.role)) {\n            // Redirecionar para página do employee se não for admin/supervisor\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/employee\", req.url));\n        }\n    }\n    // APIs administrativas\n    if (pathname.startsWith(\"/api/users\") || pathname.startsWith(\"/api/machines\") || pathname.startsWith(\"/api/dashboard\")) {\n        if (!token || ![\n            \"ADMIN\",\n            \"SUPERVISOR\"\n        ].includes(token.role)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"N\\xe3o autorizado\"\n            }, {\n                status: 401\n            });\n        }\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n}, {\n    callbacks: {\n        authorized: ({ token, req })=>{\n            const { pathname } = req.nextUrl;\n            console.log(\"\\uD83D\\uDD12 [MIDDLEWARE] Verificando acesso:\", {\n                pathname,\n                hasToken: !!token\n            });\n            // Permitir acesso às rotas públicas\n            const publicRoutes = [\n                \"/\",\n                \"/auth/signin\",\n                \"/auth/signup\",\n                \"/auth/complete-profile\",\n                \"/kiosk\"\n            ];\n            if (publicRoutes.includes(pathname)) {\n                console.log(\"✅ [MIDDLEWARE] Rota p\\xfablica permitida:\", pathname);\n                return true;\n            }\n            // Rotas de API públicas\n            if (pathname.startsWith(\"/api/auth\") || pathname.startsWith(\"/api/debug\") || pathname.startsWith(\"/api/test\")) {\n                console.log(\"✅ [MIDDLEWARE] API p\\xfablica permitida:\", pathname);\n                return true;\n            }\n            // Outras rotas requerem token\n            const hasAccess = !!token;\n            console.log(hasAccess ? \"✅ [MIDDLEWARE] Acesso autorizado\" : \"❌ [MIDDLEWARE] Acesso negado - sem token\", {\n                pathname\n            });\n            return hasAccess;\n        }\n    }\n}));\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - manifest.json (PWA manifest)\n     * - icon files (PWA icons)\n     * - public folder\n     */ \"/((?!_next/static|_next/image|favicon.ico|manifest.json|icon-.*\\\\.png|.*\\\\.svg|public).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTzZCO1FBQ1Q7SUFDRjtBQUNGLElBQ0Q7QUFFTSxNQUFNQyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7Ozs7O0tBUUMsR0FDRDtLQUNEO0FBQ0gsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICduZXh0LWF1dGgvbWlkZGxld2FyZSdcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChcbiAgZnVuY3Rpb24gbWlkZGxld2FyZShyZXEpIHtcbiAgICBjb25zdCB7IHBhdGhuYW1lIH0gPSByZXEubmV4dFVybFxuICAgIGNvbnN0IHRva2VuID0gcmVxLm5leHRhdXRoLnRva2VuXG5cbiAgICAvLyBSb3RhcyBxdWUgcmVxdWVyZW0gYXV0ZW50aWNhw6fDo29cbiAgICBjb25zdCBwcm90ZWN0ZWRSb3V0ZXMgPSBbJy9hZG1pbicsICcvZW1wbG95ZWUnLCAnL2FwaS91c2VycycsICcvYXBpL21hY2hpbmVzJywgJy9hcGkvYXR0ZW5kYW5jZScsICcvYXBpL2Rhc2hib2FyZCddXG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNlIGEgcm90YSBhdHVhbCDDqSBwcm90ZWdpZGFcbiAgICBjb25zdCBpc1Byb3RlY3RlZFJvdXRlID0gcHJvdGVjdGVkUm91dGVzLnNvbWUocm91dGUgPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChyb3V0ZSkpXG4gICAgXG4gICAgaWYgKGlzUHJvdGVjdGVkUm91dGUgJiYgIXRva2VuKSB7XG4gICAgICAvLyBSZWRpcmVjaW9uYXIgcGFyYSBsb2dpbiBzZSBuw6NvIGF1dGVudGljYWRvXG4gICAgICBjb25zdCBzaWduSW5VcmwgPSBuZXcgVVJMKCcvYXV0aC9zaWduaW4nLCByZXEudXJsKVxuICAgICAgc2lnbkluVXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NhbGxiYWNrVXJsJywgcGF0aG5hbWUpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHNpZ25JblVybClcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgc2UgbyBwZXJmaWwgZXN0w6EgY29tcGxldG8gKGFwZW5hcyBwYXJhIHVzdcOhcmlvcyBhdXRlbnRpY2Fkb3MpXG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBjb25zdCBwcm9maWxlQ29tcGxldGUgPSB0b2tlbi5wcm9maWxlQ29tcGxldGUgYXMgYm9vbGVhblxuICAgICAgY29uc3Qgcm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNaWRkbGV3YXJlIC0gcGF0aG5hbWU6JywgcGF0aG5hbWUpXG4gICAgICBjb25zb2xlLmxvZygnTWlkZGxld2FyZSAtIHByb2ZpbGVDb21wbGV0ZTonLCBwcm9maWxlQ29tcGxldGUpXG4gICAgICBjb25zb2xlLmxvZygnTWlkZGxld2FyZSAtIHJvbGU6Jywgcm9sZSlcbiAgICAgIGNvbnNvbGUubG9nKCdNaWRkbGV3YXJlIC0gaXNQcm90ZWN0ZWRSb3V0ZTonLCBpc1Byb3RlY3RlZFJvdXRlKVxuICAgICAgY29uc29sZS5sb2coJ01pZGRsZXdhcmUgLSB0b2tlbi5zdWI6JywgdG9rZW4uc3ViKVxuICAgICAgXG4gICAgICAvLyBTZSB1c3XDoXJpbyBhdXRlbnRpY2FkbyBlc3TDoSBuYSBww6FnaW5hIGluaWNpYWwsIHJlZGlyZWNpb25hciBwYXJhIGRhc2hib2FyZCBhcHJvcHJpYWRvXG4gICAgICBpZiAocGF0aG5hbWUgPT09ICcvJykge1xuICAgICAgICBjb25zb2xlLmxvZygnTWlkZGxld2FyZSAtIFVzdcOhcmlvIGF1dGVudGljYWRvIG5hIHDDoWdpbmEgaW5pY2lhbCwgcmVkaXJlY2lvbmFuZG8uLi4nKVxuICAgICAgICBcbiAgICAgICAgaWYgKHByb2ZpbGVDb21wbGV0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTWlkZGxld2FyZSAtIFBlcmZpbCBpbmNvbXBsZXRvLCByZWRpcmVjaW9uYW5kbyBwYXJhIGNvbXBsZXRlLXByb2ZpbGUnKVxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2F1dGgvY29tcGxldGUtcHJvZmlsZScsIHJlcS51cmwpKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAocm9sZSA9PT0gJ0FETUlOJyB8fCByb2xlID09PSAnU1VQRVJWSVNPUicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTWlkZGxld2FyZSAtIFJlZGlyZWNpb25hbmRvIEFETUlOL1NVUEVSVklTT1IgcGFyYSAvYWRtaW4nKVxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2FkbWluJywgcmVxLnVybCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ01pZGRsZXdhcmUgLSBSZWRpcmVjaW9uYW5kbyBFTVBMT1lFRSBwYXJhIC9lbXBsb3llZScpXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvZW1wbG95ZWUnLCByZXEudXJsKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZSBvIHBlcmZpbCBlc3TDoSBjb21wbGV0byBlIGVzdMOhIG5hIHDDoWdpbmEgZGUgY29tcGxldGFyIHBlcmZpbCwgcmVkaXJlY2lvbmFyXG4gICAgICBpZiAocHJvZmlsZUNvbXBsZXRlID09PSB0cnVlICYmIHBhdGhuYW1lID09PSAnL2F1dGgvY29tcGxldGUtcHJvZmlsZScpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01pZGRsZXdhcmUgLSBQZXJmaWwgY29tcGxldG8sIHJlZGlyZWNpb25hbmRvIHBhcmEgZGFzaGJvYXJkJylcbiAgICAgICAgaWYgKHJvbGUgPT09ICdBRE1JTicgfHwgcm9sZSA9PT0gJ1NVUEVSVklTT1InKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvYWRtaW4nLCByZXEudXJsKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9lbXBsb3llZScsIHJlcS51cmwpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNlIG8gcGVyZmlsIG7Do28gZXN0w6EgY29tcGxldG8gZSBuw6NvIGVzdMOhIG5hIHDDoWdpbmEgZGUgY29tcGxldGFyIHBlcmZpbFxuICAgICAgaWYgKHByb2ZpbGVDb21wbGV0ZSA9PT0gZmFsc2UgJiYgaXNQcm90ZWN0ZWRSb3V0ZSAmJiBwYXRobmFtZSAhPT0gJy9hdXRoL2NvbXBsZXRlLXByb2ZpbGUnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNaWRkbGV3YXJlIC0gUmVkaXJlY2lvbmFuZG8gcGFyYSBjb21wbGV0ZS1wcm9maWxlJylcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvYXV0aC9jb21wbGV0ZS1wcm9maWxlJywgcmVxLnVybCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUm90YXMgZXNwZWPDrWZpY2FzIHBhcmEgcm9sZXNcbiAgICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FkbWluJykpIHtcbiAgICAgIGlmICghdG9rZW4gfHwgIVsnQURNSU4nLCAnU1VQRVJWSVNPUiddLmluY2x1ZGVzKHRva2VuLnJvbGUgYXMgc3RyaW5nKSkge1xuICAgICAgICAvLyBSZWRpcmVjaW9uYXIgcGFyYSBww6FnaW5hIGRvIGVtcGxveWVlIHNlIG7Do28gZm9yIGFkbWluL3N1cGVydmlzb3JcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvZW1wbG95ZWUnLCByZXEudXJsKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBUElzIGFkbWluaXN0cmF0aXZhc1xuICAgIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL3VzZXJzJykgfHwgXG4gICAgICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvbWFjaGluZXMnKSB8fCBcbiAgICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS9kYXNoYm9hcmQnKSkge1xuICAgICAgaWYgKCF0b2tlbiB8fCAhWydBRE1JTicsICdTVVBFUlZJU09SJ10uaW5jbHVkZXModG9rZW4ucm9sZSBhcyBzdHJpbmcpKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTsOjbyBhdXRvcml6YWRvJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgfSxcbiAge1xuICAgIGNhbGxiYWNrczoge1xuICAgICAgYXV0aG9yaXplZDogKHsgdG9rZW4sIHJlcSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcS5uZXh0VXJsXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygn8J+UkiBbTUlERExFV0FSRV0gVmVyaWZpY2FuZG8gYWNlc3NvOicsIHsgcGF0aG5hbWUsIGhhc1Rva2VuOiAhIXRva2VuIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBQZXJtaXRpciBhY2Vzc28gw6BzIHJvdGFzIHDDumJsaWNhc1xuICAgICAgICBjb25zdCBwdWJsaWNSb3V0ZXMgPSBbJy8nLCAnL2F1dGgvc2lnbmluJywgJy9hdXRoL3NpZ251cCcsICcvYXV0aC9jb21wbGV0ZS1wcm9maWxlJywgJy9raW9zayddXG4gICAgICAgIGlmIChwdWJsaWNSb3V0ZXMuaW5jbHVkZXMocGF0aG5hbWUpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBbTUlERExFV0FSRV0gUm90YSBww7pibGljYSBwZXJtaXRpZGE6JywgcGF0aG5hbWUpXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJvdGFzIGRlIEFQSSBww7pibGljYXNcbiAgICAgICAgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvYXV0aCcpIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvZGVidWcnKSB8fCBwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL3Rlc3QnKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgW01JRERMRVdBUkVdIEFQSSBww7pibGljYSBwZXJtaXRpZGE6JywgcGF0aG5hbWUpXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE91dHJhcyByb3RhcyByZXF1ZXJlbSB0b2tlblxuICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSAhIXRva2VuXG4gICAgICAgIGNvbnNvbGUubG9nKGhhc0FjY2VzcyA/ICfinIUgW01JRERMRVdBUkVdIEFjZXNzbyBhdXRvcml6YWRvJyA6ICfinYwgW01JRERMRVdBUkVdIEFjZXNzbyBuZWdhZG8gLSBzZW0gdG9rZW4nLCB7IHBhdGhuYW1lIH0pXG4gICAgICAgIHJldHVybiBoYXNBY2Nlc3NcbiAgICAgIH0sXG4gICAgfSxcbiAgfVxuKVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcmVxdWVzdCBwYXRocyBleGNlcHQgZm9yIHRoZSBvbmVzIHN0YXJ0aW5nIHdpdGg6XG4gICAgICogLSBfbmV4dC9zdGF0aWMgKHN0YXRpYyBmaWxlcylcbiAgICAgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXG4gICAgICogLSBmYXZpY29uLmljbyAoZmF2aWNvbiBmaWxlKVxuICAgICAqIC0gbWFuaWZlc3QuanNvbiAoUFdBIG1hbmlmZXN0KVxuICAgICAqIC0gaWNvbiBmaWxlcyAoUFdBIGljb25zKVxuICAgICAqIC0gcHVibGljIGZvbGRlclxuICAgICAqL1xuICAgICcvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xtYW5pZmVzdC5qc29ufGljb24tLipcXFxcLnBuZ3wuKlxcXFwuc3ZnfHB1YmxpYykuKiknLFxuICBdLFxufVxuIl0sIm5hbWVzIjpbIndpdGhBdXRoIiwiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcSIsInBhdGhuYW1lIiwibmV4dFVybCIsInRva2VuIiwibmV4dGF1dGgiLCJwcm90ZWN0ZWRSb3V0ZXMiLCJpc1Byb3RlY3RlZFJvdXRlIiwic29tZSIsInJvdXRlIiwic3RhcnRzV2l0aCIsInNpZ25JblVybCIsIlVSTCIsInVybCIsInNlYXJjaFBhcmFtcyIsInNldCIsInJlZGlyZWN0IiwicHJvZmlsZUNvbXBsZXRlIiwicm9sZSIsImNvbnNvbGUiLCJsb2ciLCJzdWIiLCJpbmNsdWRlcyIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsIm5leHQiLCJjYWxsYmFja3MiLCJhdXRob3JpemVkIiwiaGFzVG9rZW4iLCJwdWJsaWNSb3V0ZXMiLCJoYXNBY2Nlc3MiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});